function [Y,Xf,Af] = net_naca0012_quad(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 07-Jul-2020 17:52:05.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx4 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.2492538639608854467;-2.4308106560993536505;-3.2037622811613046814;2.8857808438697420961;2.5980285170958596908;2.544342379858377079;2.4414163357122586895;1.4891734421547573319;1.4866241109980031787;-0.89918090278698992179;0.13918403211539503994;0.79004878414640389295;-1.2838343025231548911;0.96772190665257673547;-0.1031343471689003255;-0.6891327019949453625;-0.66872206995664973395;0.33400050578887052755;0.0063025775976765091579;-1.1372152022247241643;0.16887199125665167121;0.058854200905772785513;0.85822538735904574381;-0.69635638443114722396;0.34708854671644051582;0.008341334825705629466;-0.95794344501918460288;0.68113048649874519125;-0.57228791046582261348;1.1420208071987796306;-0.35083463273107412528;0.36849076332086666552;0.55302287162693763989;3.2825798153142473623;-0.972139036196296491;2.5853523394652091483;1.8414900726572496215;2.1093620373596952966;-2.1359360965307621072;-0.63963415591322092535];
IW1_1 = [1.0862928465296630698 -0.11125656787621882038 -0.93741579579041611758 0.020355709127472365605 -0.85090224020523208548 0.41985826723420888174 0.56927727144345519061 -0.5341154851707058393;0.24603125703560943527 -0.29220615755540935154 -0.81544293003591661328 0.034511519851726540908 0.035006364677178672395 -0.96174071519536075137 1.4207747372949477427 0.27436216947414204803;0.74005216448216371017 1.053828326991554043 0.67313156319620670587 0.32568830550831284754 0.25697333512830344837 0.55591719349035817466 -0.99052183246416347639 -0.31728004302451462415;-1.4795378829962466671 -0.7045393364145596804 -1.0013527458272115656 -1.7998043214654624311 -0.41812483723562549054 -0.81215505297184475975 0.054978509364895997158 -1.0721163644044970908;-0.59746231859875365 -1.328895862461999533 1.7276162440918518826 0.073708292664426661167 -0.094750194980702515113 -1.327155137669566054 0.2636080442567666493 -0.18636840994300604701;-0.060170887318136113964 0.50762020319634715282 -0.97241247169811784179 -0.20533189265497037157 2.1759827209766333667 1.5312237865334408227 1.2845522432962055426 -0.2487157188991529766;-0.95228381310679388605 -0.87312306487422008949 0.84231118715657182783 0.39777529441677722533 0.68102101156208949551 -0.89092271927350930039 1.4664783098023181918 1.1809020717637674913;-0.46915285807056611445 -0.043017733010025357987 0.48905679660785844609 -0.023983749254469319268 -0.28427529916072052929 -1.1126211974169397667 -0.41255364315706832823 -0.30862262216455998987;-0.49183926510936815113 -0.016724532856167560746 0.51250515791573636459 -0.053250515065104288281 -0.27706174196698529766 -0.4528759006473742077 -0.98950240083877483155 -0.31375037777368491865;-0.33534375077967049084 -0.50817989050579259747 0.019150806344355987554 -0.17956731013062177116 0.081854524893479094216 0.12404299889353893882 0.33906213798167655904 0.06533135055812641645;0.026782656442208892938 1.048778492447210553 -0.34659580986179799877 -0.092477130097307291834 0.30011118428878102993 0.71878565495153101672 -0.8793395207109022671 -0.20320355521538244203;0.069691807108627462641 1.1290197920411546573 -0.9680546320751847178 -0.19039533582555726032 -0.21986652458340155691 -0.96037297505385177399 -0.58260326411716412132 -0.32239017770441497079;0.18868927793354076106 0.078375782297439897106 1.242879894215911829 0.23326725690718885797 0.5598263723679488546 1.7580687980752174315 -1.9840175760025560159 -0.33435873376110386568;-1.4108875587640712368 -1.2730944655046860792 -1.6563127267668851239 -0.87260802047728269759 -0.27302595453499040046 0.31078729114052466853 0.39429898204683155871 -0.17421401678001693925;-0.10909956991696226347 -1.2331846681883038563 0.93040586081745213498 0.27797408660893418997 0.4602730647166409228 1.7145556836909188192 -1.4066233743783354004 -0.69602534985123121203;-0.040539410211234409853 -0.80867180884905220939 0.7753318984531920588 0.093649839276167309854 0.21397680976149568988 1.7226065444068652255 -0.32858634527916069645 0.28340739560319316848;-0.17750270158627237671 -1.1453773289900401888 1.0684165765522817271 0.17124447924124233666 0.33579278977364523939 2.2482826346163693465 -0.73859408328894649021 0.1989315480316209972;0.033609768725589433958 1.2446935350701653356 -1.6470786931690220012 -0.60451585163788346122 0.23675182140571360279 0.79538409249013442004 -0.36552457630533335964 0.17674960413914925228;-0.11176790021213808823 0.79405210427096684089 -0.15560274463732423622 -0.53474096717376251586 -1.367465070553431028 -2.2088985959801425984 2.0679106323894762554 1.5259849093996202818;0.48587211016123998952 0.59925730554827694174 -0.2650253279402499107 0.17962418602126009604 1.1281186298867020845 0.66045586252568333485 1.746672834272183783 1.2728059892769951755;0.013088224327324050542 0.80340587366859028684 -1.1672901647970421735 -0.40539685770881528359 0.086403451202876555004 0.32487383452652596194 -0.077799602833803174762 0.092588123379441666927;0.014755793210471828888 -0.20233464466939529713 0.2762160460042758503 -0.017413865661684600067 -0.025645486045941121023 0.8776948491877475389 -0.39636057979827954423 0.071169698330250621976;-0.79389850656029214981 -2.4292806151564851902 1.4986040095554209461 0.19389804459463097497 0.11484128822139511028 -0.84119317731435472307 1.1483345748958353472 0.27741095365218332303;-0.46803557705814907708 0.70718171212875613474 0.5430144885451709813 0.46881092886794334396 1.6591808010885191749 0.3602374105913378477 0.62315374101279097374 0.47236058478958686813;0.15327031750921971121 0.9226276557358658037 -1.3880298124376448943 -0.3089917869186180055 -0.40147275521575598312 -0.38020955773384373932 -0.63288613519091452275 -0.50082549986161273292;0.24819188150757021116 -0.68179251418476860547 -0.107145909539221873 0.56117260275831526428 1.2639918302504744574 0.4620152237110924931 -0.48523766739946144755 -1.267112271783441324;-0.70751571544075353426 -0.93251270227200799834 -2.2548514635497181047 -1.4030607034541606737 0.60848742085685458836 0.9799100476482923705 -0.12974744137404142785 0.93394245513076923348;0.038335729793893540129 -0.34872619839745516712 0.26721973518539454684 0.090862860369253520276 -0.00017271279056906268384 -0.71815377180045780747 1.3724501144961889221 0.20580722304007531553;-0.12613387942829448751 0.745978251316848473 -0.95607548171869316533 -0.17587969572586537037 -0.22569225078856980371 -0.25613870022082430022 -0.081009426612007690016 0.13272085746228354242;-0.048910030518556545098 -1.2473088315030784745 1.0168117924213579961 0.23142734846526299974 0.050338818741212348895 -0.83647529168471868033 1.9286753893391932468 0.17473744451006489875;-0.39405133068328213053 -0.44133352952003046532 -0.63450446843365915228 -0.86968459759923744112 0.15214343025542725885 0.76284274280755592912 -0.37131821735794007244 -0.99573401577325382217;0.34827735246154462034 1.0084403975776083939 0.25185921886547762982 0.49340004301748385807 0.14826125447161148108 0.08109234671724746546 -0.43161075597853781893 0.49179277036651708466;-0.0036882207847529118253 0.85712508468621950719 -0.70630050032095392787 -0.16488235286271279989 -0.06039127845542727191 0.54123025402082547419 -1.1941172316287929078 -0.067739171180446061671;0.008006807607472962024 0.26183919383028819716 0.31675784978664078828 -0.04797857014823403432 -0.45048072101729247363 -1.1329671778647136815 -1.5244374333742003458 -0.49987267517984945719;-0.39667574836394348115 0.0906032640011870255 -0.52393967601688262725 -0.34782596441269969523 0.32050621697887021755 1.3668054229423898249 -0.68115323476456923757 0.037590989367270122301;0.31250143384182660355 -0.72012045979342975688 0.35975042803118439938 1.0916071587586120284 -0.13831558323331261118 -0.66359369501957155002 0.58060587146704301098 0.34360075604201034682;0.30051088621734595163 0.070749382912017197422 0.49763742681066508444 -0.23545875785062098107 -0.4915835636722177826 -0.022545102225858676404 2.2834500112509279468 0.96846224583817275278;0.016262241731370932762 0.21115496195316044159 -0.092498447651681220405 -0.017120287159269064609 0.071267760477394623275 1.394939380174773591 -2.5283689746131279286 -0.38438417617571973839;-0.29814553493373696647 -2.0746920098505734487 1.7695987274390008182 0.48806860982292660234 0.2419741922718466054 1.2784071104991989731 -1.4043165953798311119 -0.29439632778813457081;0.025527898251553261116 0.85217492014271034595 -1.4492392599809094111 -0.14645039847143331846 -0.42896586637120015517 -1.2215106696623232452 1.086197562955160123 0.31359869684719060556];

% Layer 2
b2 = [-0.24820955058559246442;-0.66265734269862552885;-0.45414712937556506178;-0.23642270468389151028];
LW2_1 = [-0.12896953899339197447 -0.51646838045536525019 0.12046591928164968044 0.0064708263927193707468 0.40524386451311567026 0.0076363325493953720935 -0.0037196126195379007606 0.76258896847041679479 -0.88906613329973471771 -0.66883091929242188822 0.45329770072940595016 -0.030348719677591895483 0.12785802237060364672 -0.0077937288147792889437 -0.15331263712363363272 0.11267216599178807301 -0.041991834544495183767 0.069573285759353079016 -1.0058186788942029555 -0.0034207929479224481913 -0.34765944617360156066 -0.86783357204635847015 -0.11910031305463435192 0.0066232461860055210495 0.020596453554871534813 -1.1882021062002974254 -0.005781940104845179583 1.0238112345564220895 -0.44249623558643724763 -0.27373994763016290532 0.020911227789265289523 0.0053179136872459715699 -0.10219957781094500537 -0.039247288987698768226 0.18626655327102883963 -0.40350960229722443451 -0.024194701259080526878 -0.075846950363428797259 0.65282669295532580467 0.024713792172321710772;0.81702148753089687272 -0.28280566205102153354 0.084872986586721210767 -0.0028856124207679630794 -0.2703899243668732022 0.0048460712086895590955 0.050310912573258856351 0.4159774425283791488 -0.42745731040747053653 -0.31028362481184929011 0.56403529299127341812 0.23693712851873108272 0.15589984457024380626 -0.00025471131182801482005 -0.21192496290892615107 0.59580403513589863529 -0.26854467790911951131 0.16364744181216656083 -0.93782262475107247557 -0.0074999531908567663302 -0.54252587001037655412 -0.90761725071071097659 -0.022317666974888811932 0.0086561845612799191707 -0.0017811881037451680106 -1.0932824792254525192 0.00079978010564878913163 0.37346917872206003564 -0.29069921952787414199 -0.10267529829208160708 -0.047099979304170119798 -0.043312590606315169717 -0.44677896077492956772 0.063620062242019020937 0.14926474120873467477 0.49368130187010605958 0.016374836552094682723 -0.076541107677289527134 -0.96684721550993080186 -0.15278482571317714145;-0.028804581095797296419 0.2190802701879530634 -0.012693696136789989898 0.0044358347717599975329 -0.23904496668430613715 -0.018969504752497184236 -0.039841927648974158338 0.23464785476571634049 -0.15380050841027265163 -0.24765526146146907283 -0.06431957928047077333 -0.43534118781053759983 0.13895174781084385085 -0.010128175518434602217 0.72096563523369650017 0.22435220533103983342 -0.46320672721033584462 -0.16337845458505498297 0.052975505020044520721 -0.020529194053285446109 0.43965480547018154223 0.27155122100958151155 -0.0012700231054030685501 0.050762235063947690195 0.14561091927360866882 -0.19150392874667993004 -0.0090584205351609808216 1.3708938998831046163 0.40522849563918894589 -0.063310487037302284885 0.028299635758210761605 0.062259970963291201562 -0.16618916390917806702 0.039417814684470489639 0.059734677983194407747 -0.30386232167080912125 -0.063060417286989689512 -0.66848007494509054105 -1.3093671979780538983 -0.38022827492867838917;0.051358209605559403121 -0.24521608408861908512 0.028165518126448473718 -0.0088534209697371784448 -0.38789351920682785257 -0.00027278877632455823159 -0.011688416701829851263 -0.64027747898735443144 0.73116033254985968171 0.57356379798621581756 0.62871544495032516409 0.46229079119739158177 -0.14620715538760278851 0.011920719428579359261 -0.2393663774819892176 -0.14886759519107245486 0.43407235713419550782 -0.22854428554463943057 -0.16164642834694431528 0.016530009045933064665 0.40174506387504221872 0.92940819978880917507 0.015623469227746402538 0.00596015295620917155 0.081847734328446331009 -0.1676778752966165964 0.0050693427310271443192 -1.558236900179881701 -0.68607900715340941478 1.0008007758248069763 -0.16836389874690668722 -0.23824777815340658638 -1.9118768408768027633 -0.021419845860931260167 -0.27862983337446228793 0.18835488256055313294 -0.0096325531652309524799 0.65696951272195980298 -0.36598906393113311841 0.46031473436633302265];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;0.1;0.1];
y1_step1.xoffset = [-10;-10;-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
