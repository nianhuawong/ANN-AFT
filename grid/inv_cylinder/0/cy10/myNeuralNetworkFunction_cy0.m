function [Y,Xf,Af] = myNeuralNetworkFunction_cy0(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Jul-2020 15:00:56.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.0994959321498507;0.0994959321498507;0.0994959321498507;0.0994959321498507;0.0994005701199293;0.0994005701199293;0.0994005701199293;0.0994005701199293];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5860375857611672679;-3.5346075153349607589;1.6741712192432613993;3.5153882752352405561;1.5082699646550319361;1.5966047747867366802;2.3038343286363542894;-0.92355989048923325946;-0.75778776752847487597;-2.0119064260379713183;0.0089804981426432322483;-0.0044747959753163478111;-3.8879805964167040019e-06;-1.2683886814682849842;-0.0087268820381322022989;0.16948072889631832227;0.025316172400527615916;0.013391465755543494054;0.11608936581185635983;-0.20740784293097602742;-0.16752721611921905787;-0.050350022796607281361;-0.014182879840578442587;0.0025149574140591380612;-0.028588759971787190695;0.0073618635980752617984;-0.12264212966076802613;0.13795275725407274425;0.00893094226707029544;-0.91840978274447404583;-2.2994064448459985428;0.0050519102684759148447;-0.043658933422413490066;2.2914444449972761753;1.7558704800297482151;1.4404575695213419628;-1.0176927412716481047;-0.26949995395913728391;1.1013755686780488663;-1.6927882347395115659];
IW1_1 = [-0.14189315887364156721 2.7811211572659626512 -0.56419724400976589695 -0.041496201804691573711 -0.013319161312809616252 3.0313011946725816337 -4.1827897499004764725 0.0031777871573630996072;0.14287925149281852089 -2.5102188541178001024 3.8766801187526613859 0.10625727164403167557 -0.018341660729475708219 4.0111091997721768365 -0.90228472644152590831 0.052454819932287420625;0.11921575672978702853 1.2048197253591519384 -0.36410797697661229089 0.14987703766268314909 0.073625309840098906999 -3.2257669778776856262 1.9114509902240350847 -0.11170107215759192409;-0.15090523138344610898 2.713015891687773351 -4.0995314288136164294 -0.11512194855427984597 0.0075477657531774749317 -3.7165664186153026805 0.64542392067291998181 -0.029915662127859305591;-0.36108556173054134897 -0.028333042828815508535 3.8369359344666471578 -0.33939455936377244116 -0.14694639989094743227 -12.177901053712144375 10.169081316100603729 0.27726647849386654165;-0.055361526053585068119 3.8938427997962516969 -6.2213462314069332137 -0.070210945825935469622 0.16831964494639881091 1.1859512645729408664 -3.8601355410338258345 0.021616463794523487624;-0.0051861457461990258244 -5.4955203860462722432 2.4462213340713532261 -0.072351251023447041288 -0.030982783204876886141 -3.6655927726446626558 6.2875153709153490666 0.10169407777065775367;0.013848572700333825619 3.9289831833111263926 -5.4295645534208016869 -0.021499038858567860732 0.095368078446993825859 -2.2893997646008275026 0.60342823141772161666 0.073471282729115808263;-0.047610049682372111712 1.020262714105310442 0.045930553158969177063 -0.0094510643960202256331 -0.026452532537412257879 1.6607807116456363428 -1.6131480944129104049 -0.0089231214477060154938;-0.018187650026022017524 0.61436387270766823487 -0.45437135535079603565 0.23570364065862661751 0.22411737448967269937 -5.495630462537854477 3.7167564554783529829 -0.16726067066639818681;0.58618870507812825821 -7.4205960615551624926 7.0805370539499890015 0.0010679597026907697733 0.092423348308686759101 -5.313209291827954317 5.0963151780033006943 -0.053782281413849622465;-1.5478676844075482943 2.611593509747089481 -1.1516230473602906414 -0.055401131572397149805 -0.67201270349784847369 5.3504203727832466697 -4.7641147739091440627 0.1485807825050034503;-0.094491168310792766905 0.46451278358327718898 -2.5403851246272242115 2.1911404210266676174 -0.0010149605067275018367 -0.77965205035500062536 2.3513284647031782448 -1.5473234940818045846;0.097280084250756682085 -2.0130159349693381721 0.31030538438325783179 0.02408630969320698853 0.045480783488631583433 -2.4759403365683723131 2.7724553980180752788 0.026963581826528634083;-0.17674102158896173864 6.0757028644666926098 -4.9329348998452475783 0.14380372125313942155 0.123770178624539956 -10.36169847903661001 7.9112277569682714073 -0.29028203866547602763;0.05377183740622736019 1.8447412158092890699 -3.0344329577904534112 -0.0055204576642445442325 0.080113858223140460568 -1.6953866722418799995 0.38695155857606883254 -0.014150174522708502955;0.004118492613743062955 0.96723511030428455104 -0.79141625590142272717 -0.044251152445088322296 0.045498897140116817406 -0.86545385792072349052 0.82601263191965756949 0.01866632248510988884;0.31979457677969902463 -9.3748451587196068857 6.7025194035993171937 -0.11848654381699220972 0.14215687710922311759 -5.7203921074373980105 4.8313128960950688651 0.047921552797436664517;0.0011063399974288133914 4.3576326788523838118 -5.6764329012499246119 0.019793416854808988659 0.079218217285721731491 0.38727457093449912939 -1.5338107500316442433 -0.039921272185798863108;-0.050209822011217181137 -1.5000544787201499641 -2.2532383382318830201 -0.18296855659901425928 0.19075756346523070617 -2.606947630494386825 2.7699821911760387216 0.23069556536645710598;-0.038345520534402273427 -2.5371334581169069367 3.7130228113724799144 0.0043174102771776278961 -0.087344724364293344077 0.96170830723652944716 0.29289613619710330727 0.013449292417751518985;-0.34484795429383835463 6.5687189833683605755 -6.2971766429254483199 0.21312077949852786807 -0.059355463894857879437 6.0407239025195229587 -10.491969946446209505 -0.18904973877221739609;-0.029863214101651939375 0.84327301339825722071 -0.91171835818051538691 -0.046775703494661168003 -0.46630920867642577932 4.6769517507993167982 -4.2938012565341763249 0.14374828635688458034;0.11370688215123019027 -0.26467042763926817983 2.2802677791236876104 -2.1573990660639004169 0.0097246823924786937599 0.82172256122387388189 -2.3748500384790824924 1.5119398825932648389;0.048395374145251066067 -2.2542575562681417267 2.0953162560085423216 0.028931699600058140287 -0.035521120681794839113 1.0065235067506208555 -0.98436179355418496062 -0.01662569314436040252;0.65121656380629400207 -1.6163639736816035608 1.0615815720321344351 0.053688015977415862179 0.1074173292930072493 -4.6829517888450347129 4.6731498469137751073 -0.15424475602669640573;-0.010212568362654772525 -3.6767063509910493657 4.888366218678824815 -0.0038228704266631955734 -0.08682042801970890622 0.032289904515985554112 1.1271570207247516571 0.025748301480978293132;0.25210196544764634785 -0.55810710223837223243 3.2131923072465427005 0.12789323082839207379 -0.064760333240328898929 -0.96387682266817986676 1.0897459677055212346 -0.16218515304237732244;0.74278961809942023464 -1.6908578078650340348 1.0397668937986606075 0.05492563576003225978 -0.60385283916010945582 -3.8193104180365828881 4.5192812768696635217 -0.14552412098580652655;-0.02219026373368599217 -2.3502915271261692887 2.5280887506583020752 -0.031463402379574012535 -0.021106926097200214704 0.79481406407208854414 0.33384452005161624477 0.021153869795202801668;0.20875859000990548697 -0.74947637140997880323 3.3905812708036453529 0.34601750424917421256 -0.029128792046037903229 2.749655279697385879 -5.9276857572215551073 -0.36259784259648053517;0.010856019876975205735 0.39049802027885621714 -0.67722493333201516652 -0.21635066883577649954 -0.030889631513871928375 2.0585136011151474733 -0.77401078845485460356 0.1004154222216132597;-0.33050574302843854779 -2.5611574275286757008 2.7152830414200366249 -0.02946430997895426937 -0.036265462350028275507 9.9959591593365253459 -9.7983773157966034262 0.09123762206221608384;0.02310607683371056903 -5.8064112478279925611 2.7369379998880831728 -0.082946898769801546969 -0.071430387053821986498 -3.3735893574005637596 5.9977299053113535265 0.11155186008701617473;-0.026260285335635329823 1.9642816791668793464 0.37350028480782054841 -0.042820235972346187836 -0.056184059532800034731 3.6857340131024485252 -5.3302683193542064188 0.031855469693175451906;-0.13664877718271900564 2.5687089786509149647 -0.56143320902283300189 -0.032251026899360359101 -0.03909918841071006318 2.8671668297149781601 -3.5129049485346648396 -0.020275087424700310307;0.034513737007495777498 2.4662902088972233905 -2.4933867584743549806 0.017406619736729682379 0.0051380322324054801195 -0.53143319286273793534 -0.59586317458990789575 -0.027953910468559318298;0.020318360015533703383 2.2969150584765989365 -3.4941005750484679382 -0.067463814679195613366 0.072958516112809387866 -1.2908392074691155127 0.21505073147056416594 0.054387791379808314574;-0.0099667690691492526189 1.7024345459143590542 -0.45608481463660272004 0.0049516310676992070922 0.029932073793445097831 0.33630522108476929022 -1.3450745739911862398 -0.05108536515300014097;-0.025851575862998115579 -2.0182092641180169323 4.8174675845277681319 -0.35560218039580543392 -0.54715154986936753723 -12.527346207047077797 11.601150887303392167 0.26370185112988037135];

% Layer 2
b2 = [0.081972375929148383333;-0.099520514012396893433];
LW2_1 = [0.61308847144130151907 -0.38568776249572050974 0.098782731743136190095 -0.36464293204172759655 0.014347992084410760016 0.020646190500814891322 -0.37373534374583106121 -0.042496358238571764476 0.83155239916345768947 0.047833602503316266508 -0.069697539507904096578 -0.52753660024155568653 -1.9012854331210411463 -1.4614658429792046768 0.026791355154765886942 1.4158095566635764406 1.4627006941311222477 -0.023603353843029750703 -1.4668619724215019584 -0.0063442809197272317587 2.8026327721806993942 -0.012677235596114102764 -0.79320085823716390827 -1.9544922191785758514 0.67349311787208665514 -2.0636066904154097834 -2.9693508391678458125 0.023645840187099642637 0.82991384354737274265 0.081790385372444665557 -0.018830950807639756234 -0.070891076487265530792 0.068566650469654252809 0.35762447810723091424 -0.030995668572232407817 -1.3525810610456341365 -0.088713915837461909675 -0.021091184443606018906 -0.29987726635494688088 0.016073116724938017741;-0.70549397658574153347 0.82450891474657672653 -0.075927126711737513709 0.83544802268799689404 0.0010503184852352763935 0.025157514501805217783 -0.27664521978307426986 -0.11543195372150812095 -0.3566425773835608104 -0.11007728037538547228 0.10985419813658979515 2.038387365373132365 0.51763375182975568389 0.83143446667584153253 -0.018283618062125663734 -0.27350271299173384287 5.0893840521880786554 -0.020573836521692281248 0.3166753934343453647 0.025552785969468683885 -0.3494793201235347202 -0.0081108877686404227958 4.3427534303180479469 0.40083599386988211233 1.9531432548569556129 8.9912190327234018383 0.57678087092238206068 0.02978537721439613456 -3.7461919551144378104 0.61473806594328750386 0.0029690621506568534889 0.12933641246240790146 -0.016725137634430491812 0.2821051216947788598 0.19892041899652426751 1.0863798365014194491 -0.522413876337265215 0.29869361471434002775 0.020253851167703378761 -0.0044493329679861784789];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0994959321498507;0.0994005701199293];
y1_step1.xoffset = [-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
