function [Y,Xf,Af] = myNeuralNetworkFunction_cy6(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Jul-2020 08:28:11.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1_gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.3069626059969071;12.822278863083893;-3.0939810116904769;-6.5199760320887004;-8.2086078623379137;-2.0559822614446062;-32.204919983028766;-0.61694888429141292;-1.2819982076114687;2.0563707548276233;0.032933629497314952;0.84499666777574733;1.6808995050326965;-0.18359548497450168;0.17310701811738574;-4.1278495665252759;0.035337990968860832;2.9574525188873269;0.024398610604269864;0.30748172032741566;2.2155186470097337;0.017502357339343994;-0.014658521623468682;0.0058286260165639507;0.1072262702965792;0.02135788265135815;0.25799649244661754;-1.7348440138407335;-0.11446391673434991;0.58339678690803098;-1.6754650664026236;-2.6986686145603773;8.9414976401540667;-2.0483492967788344;-15.986305406702858;1.8253913399947408;0.42274911694316181;1.8906002288970882;-1.645063142299898;-0.76871175679121573];
IW1_1 = [0.11041068761658167 -0.099514869531735536 1.9586418576248306 0.053409339383175464 0.049780781405105098 1.4468338039130595 -1.1798842221462522 -0.1103918844989292;-0.89198927864698896 -12.388881144494478 1.6723787417255653 0.2005654819934817 0.13480502438022512 -4.146944069104431 7.9809667131104804 0.29705339329049751;0.50433187864976736 10.965788731549065 -7.0982605969513619 -0.17798719422189824 -0.32390960602659924 -4.9241057776882586 6.95065738858119 0.081819416485192586;-0.45154243927999077 3.9427376942108388 2.2417326705599359 0.3276294481547698 0.0071624603020304482 11.464461286215709 -3.5110182050413274 -0.23318477969576318;1.2455817708266383 20.257191570379661 -30.732735935053476 -1.1892631002696747 0.76108674862922454 12.463539776178351 -4.9278776374699751 0.019940208279382393;-0.024921712849619474 3.2165880368386008 -0.37761236972629769 -0.12541180340746685 0.0090605246642118109 1.7590671010699703 -0.24578210354905142 0.0173659916551335;-0.84399247705815361 35.277962432772277 4.5589728247696391 -0.21028649191490895 0.41835914743573099 23.759254508185435 -30.811724741212974 -0.41525169858482985;0.037489660386117882 1.3856472231088466 -0.64889282856412123 -0.033335951305198584 -0.0047222416901188773 0.49686613791013456 -0.8038707096579405 -0.055746590243848468;0.055838151569767298 2.075251301945038 -0.026016043129444621 -0.020564335784672292 0.029719136566120061 1.463346887260438 -1.7770936628347902 -0.13031857235538749;-0.48566829935381195 -4.3710155226964638 2.3096872414035001 0.18128225636353448 -0.020201492579352578 2.3309241708369259 -0.12284832272193939 0.1864116866247004;8.3002867222391021 -10.615415406913375 2.3147381538991278 -0.044203910341845364 1.2491972123370323 -0.67475181919746829 -0.2942815892295747 -0.2624432914226642;-0.083470905243205995 -2.1351662855722524 1.4020864784919354 0.065098317531367994 0.028649584192879281 -0.093405958722366719 1.1556111209705031 0.056662389051201183;0.34044898290417736 4.4197915831204124 -7.5918778045646347 -0.66175727675452456 -0.26273224373319598 -5.7639323819688482 3.9338677224137828 0.38758668813419211;0.24694598423466529 10.013293298515027 -5.8159924817425841 0.049034095182952181 0.9003216296353489 11.953706530725261 11.87095116229931 0.12523608203916933;-0.24391176018071001 -9.829189670638204 5.6894413592927009 -0.056601350921191125 -0.88643166970849485 -11.8095055251082 -11.944531790883667 -0.12677814828401901;0.15853030972592663 3.3327588038278755 3.6145817224028618 0.079164838038057947 0.4704862744227179 9.9485103050676731 -8.7437866006260485 -0.3179080805506822;0.08231036832767015 0.94308255304158983 1.4550344371355652 0.070416700084407882 -0.018883987839333181 0.60180055000312427 -1.0815293431451618 -0.11940809444005011;-0.48221010586018187 -10.470889254537362 6.7243845549016461 0.18790917189781128 0.28999560514579692 4.5535705501255075 -6.4649788684002241 -0.07807634648481572;0.58387083114365512 10.988088868556826 -11.11054067077311 -0.46745139536661501 0.13927612564806691 3.2486407966796809 -3.1358282611088542 -0.2534402609600358;-0.4766632466557913 -1.7046775234719278 0.5366537267598479 -0.28287052635953003 0.1044468588377528 1.8190160134717044 -4.8463774867410887 -0.1568461668888218;-0.1439718944028606 -2.6507208660337045 4.307999082202965 0.47091021338318267 0.51779230768071594 7.5024260527241786 -0.78692130012605188 -0.36112639910139793;-0.34187584313737429 -8.7469540174754457 8.4522686493406827 0.49258471502807549 0.41551179176687136 6.3431628200730747 -6.4916567380017884 -0.27173092644027819;0.01860409756796173 -0.042536635860946054 0.022651761198824859 -0.018461732513561351 -0.069531098852239986 -6.2044498388535203 5.6967628111402684 0.38922358101254489;-0.15008158888583603 -0.73103964307947178 0.88986967046516674 0.026996053407797645 0.018489993057766593 4.0690470817704361 -3.4638942700073789 -0.31889747463849655;-0.075622680417827007 3.6493060073458672 -1.3676491182224484 -0.1077100581774692 0.027475389124102446 3.4085863954232254 -1.851425227865142 -0.12299098045119405;-0.12079958116982302 -0.44943777581562416 0.55986238067531557 0.030109526077205868 0.015360552666204248 4.4169822342003489 -3.8056709058835434 -0.31227360759093403;-0.013887931402971301 0.74732991254108483 -2.2734568798410684 -0.14772048074802036 -0.15538340054521402 -1.5062528198140936 6.0499774208562425 0.31041547711598921;0.00023799515768985606 -2.186141022306511 -0.39531430913335652 -0.029772329469764939 0.0817408899746314 0.99815055627570604 2.112138229016939 -0.014914601732747558;0.044517369795100778 0.049663513770664219 0.0062946248992018878 -0.044807125222206395 1.7359829923371557e-06 -3.9077537714988431 3.2930645218435197 0.21406084875805109;-0.12193776861857381 1.0325289925490957 -1.7233667532561969 -0.070697353285466835 -0.14058379379221286 -1.2766742002586038 -1.3623584085765235 -0.11448553403203934;-0.026564384228853065 -2.2829411194949594 -0.0544660008454914 -0.0092791243729591841 0.082401532015075801 0.97454858024395807 1.9916752377502243 -0.0043870216843026836;-0.12115096142553532 4.0012103315562886 -8.1470712364820717 -0.29431883808622211 -0.18051436043703858 -2.682883069146202 1.368941020675853 0.039570440628625844;0.49737965110564475 12.181100274076966 -20.193302874142187 -1.4661619144909663 -1.1461462184227713 -27.192198324161964 17.321824758052895 1.1068858946939186;0.038489667623462134 -0.46035162449835043 -0.29895522624769449 -0.064378310371990113 -0.044902008380843912 -1.795054764542342 -0.10520091019647537 -0.018506323026071459;-0.23533431593209569 -14.68257064930526 7.8586918421029921 0.0056444003512571596 0.019314274122983383 -23.195499341252631 15.233343880614248 0.75222011852944126;-0.0028382347749904683 1.608833723431814 -0.60676976568438012 0.01659542170752281 0.022018233243478832 2.1701694447207078 -0.77868107704084522 -0.03467142774966428;-0.1379017285319582 -0.78206813645133277 0.23990020866930908 0.032970435066527574 -0.010550028304457726 0.15005431442168304 -0.13178728126051126 0.020364970827659597;-0.019630897563459801 1.0293898163451891 -0.17912738976594569 0.039586241780980677 0.03238916251616538 1.9139757898649095 -0.31761983234837099 -0.0059908707730410909;-0.051611836873755923 -2.3304695855122231 0.19466573663015477 0.0084008288171847027 0.084731241867830084 1.0459779073691808 1.8468474873152139 0.0022210001608246152;-0.10213736972505705 -1.8558620411293587 1.3834806138937523 0.061830529843576364 0.037289689253154262 0.35967974526562557 0.86283308878575682 0.018506534765934224];

% Layer 2
b2 = [-0.32075164915861432;1.0614567347130874];
LW2_1 = [0.50521767277476382 -0.065118009062797771 1.104475220627916 0.041974005978479667 0.00038684450153356697 0.016332103708719466 0.02248841215142322 -2.5044585045829009 0.71114233749990996 0.085395982842070187 -0.033425440112292572 -0.90034907993189628 -0.038683700165649842 -0.2920463766577735 -0.2903941478869736 -0.057498727954142466 0.15148357229643877 1.171391604364284 0.021759001641240627 -0.050246781687340022 0.033944460525418253 0.063482796861158527 -0.60079159388044012 1.0274649074743059 -0.02985021464062795 -2.144091696295912 0.022291377307300766 2.9466057170139357 -0.62948576787502897 -0.048147613879451476 -6.5555297069828731 0.060897738294568494 -0.019850429347018445 0.94126135731845684 0.071783580846231126 -1.8346847910378008 -1.3995846719048308 2.9586175757350723 3.6068146987836598 -0.32927252951447911;-0.2980528165579015 0.15154228975596098 0.46699988952259197 -0.038786218321355974 0.017102596928256004 0.17117414849791662 -0.035054796625597323 3.6159002596123719 -0.7889787120999604 0.057985269506355713 0.015828444749462808 1.4029727335274245 -0.034416237355868823 1.2094045436429328 1.2093524355224499 0.022787828485957756 -0.22503636895246831 0.52923415821718156 -0.10034495873140309 -0.03627931516874372 0.021252102661789261 0.093105674432124821 0.54059374895630674 -3.4571897277736778 0.12827903491262815 4.7460493787297482 0.036836255348520128 -2.2314045981393495 1.1577547285736918 0.10947316734320592 5.1323687940662213 -0.078545620568212085 -0.014656019737152489 -4.7713902935823631 -0.1063397336304174 5.57842329442117 0.067319302504956643 -10.43706242360418 -2.949771598471604 1.1938391466648495];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = [0.1;0.1];
y1_step1_xoffset = [-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
