function [Y,Xf,Af] = myNeuralNetworkFunction_cy7(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Jul-2020 09:18:32.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1_gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.012306618949241593;-0.012344113709068565;-1.675208547640181;2.1100148251080424;0.45108549808690501;-0.0065839993723244188;0.013058600524840916;-0.027764948662159891;-0.032006313854205014;-5.5653280628748369;1.2934087283002589;0.13961116759978634;-0.028024262444574104;-0.011964519704413003;-1.2126312929787406;0.34640208106916959;-0.027567123632856284;-0.077174380240795565;1.1710041707547458;0.037821801760873797;0.16917582240813181;2.6488881724572342;-0.18381826403394849;-0.0073405852456292454;0.21860628389617762;0.0060962175318552882;-0.16508822416514099;0.0059890356973169466;0.011914251763335009;-0.02183723484464516;-0.15393251862671373;0.11489220948259732;-0.0068593984611741207;1.6618988465306228;-0.12662435206885653;0.0066393364025545704;0.15456222183323559;0.0074316641875731646;0.49656872994141987;-0.010214021417974173];
IW1_1 = [-0.17573846707648624 0.17847280134262064 1.3476216988026333 -1.3586234261549579 -0.08259311461327018 -2.1072169567522501 0.44794890154545325 1.7426571933090298;-0.23610206800902864 0.082666881288016983 1.8386653132598971 -1.6931587432826316 -0.10836815937948574 -2.0164352541055135 0.002398454646815032 2.1306706026878994;-0.13913069532749903 -0.65135578962426244 -1.7801515935384269 -0.094558506726531308 0.35511032285063721 1.573533796750876 -5.9500133120835716 -0.11314961415261993;0.39951400230000217 2.0222025097086496 -2.4268479122473234 -0.52794994015237573 0.21024730317136286 -4.0433282926788818 -0.30745849371125034 0.024388952014752475;0.62912104498071508 7.6614960322042549 -2.8266852111462493 0.21206737491480498 0.77520285818403267 6.6588719544572346 -4.3465347765354689 -0.037746665093979427;1.6090571695918738 8.0750608693713932 -7.952306713637034 -1.3623713757876867 -0.45923672697888301 -6.1388111440993116 6.3172180227151209 0.33220469418887794;-7.4587194984951655 5.8451125943063449 1.4109916250194814 0.28302989486970243 13.475585874079986 -3.4187373553330689 -9.7160129276498246 -0.40639635267530416;-0.50142469713719351 -10.321389296875461 10.700124917040597 0.18814341671894055 0.097082953489621676 -3.9662052619197432 3.5185374300465733 0.44099263427886193;-0.092906981861156965 -0.43632515580192349 1.3241092915965749 0.17273242231031838 -0.0089085158578551798 0.27926834269065998 0.87416815737158982 -0.015783993654938901;1.3728629801918038 22.358862222923658 -12.010845959932748 -1.2335957702691078 -0.4018600349665023 -10.393085908605034 15.298552924081203 0.54108466599206118;-0.26479881595390714 -2.4473219597887823 2.3039661040266317 -0.14934493306380539 0.18424716926945492 3.0215260871215639 -4.6069338953505943 -0.18122542119684878;-0.051717710239855913 -1.5552003558205063 -0.30388361340387421 0.047167192163069332 -0.023515744285861766 -0.19718138627434148 2.0991894267823636 0.26659492188160855;-0.088306979302416391 0.23553396748474917 1.5844650913696765 0.037013936422918794 0.00027709181641782731 1.5993784135581273 -1.6386325439675811 -0.12532741449704424;0.21988289275664424 0.30437344770559083 -0.47604181004916751 -0.00093658991786803574 -0.10319705700397241 -4.8420177334303025 4.7084090178635893 0.24937218944140696;0.093403875887965795 6.7293683062543082 3.3697581000154844 -0.071457255400750624 0.40746232043905739 5.7541304168115577 -13.854154644606563 -0.29701782328316673;0.10595351899038115 0.763178501711547 -2.309510727855026 -0.12417198341827189 -0.034804707052352259 -0.92856419200339579 -0.60298070875610765 0.043931864082849215;-0.07331202099586813 0.34219023493864698 1.4280992395005632 0.022433546924882058 0.010213723865041012 1.7132673457203635 -1.8146449970788621 -0.12600144925819828;-0.022467517330916082 -0.27969432582171455 0.47011309459709172 -0.087610934472198976 0.02114437292116517 0.13045405573759697 -0.83591932953085746 0.016284135290288198;-0.085351702138794755 -6.5651211307875137 -3.2615582125465128 0.061775505684070732 -0.4091134895255461 -5.6554286808245493 13.582169353123088 0.28899882959326367;-0.067612102906533328 -0.86547989380542978 0.4971945681165123 0.011496429712195997 -0.020034776359106568 0.94618146949529747 -1.0493937336186951 -0.064388258745715188;0.022736459246793114 -0.96001692457986343 -1.2628509662946017 0.023008109879172182 -0.01311845681404927 -0.83751917481136651 2.9718593002516953 0.30641625821408291;0.041439858725239129 -1.4061107631593317 -0.73073176067841628 0.74247024599775335 -0.010960237551900094 -10.045083803721592 3.1959542331449353 -0.13116238097866237;-0.94660183831082323 -9.8415531050049871 8.3472609864367566 0.82261736781516959 -0.32009287484856391 0.9021687541321034 3.5176645842189767 0.044956275294103523;0.27804983437551706 0.1906862635127092 -0.52977897777315708 0.082007289379430318 -0.17769398078249046 -4.9893280468163423 5.0288253390958477 0.1894506274034472;0.11285015570282526 0.8321717347535742 -0.86089924612533708 0.11484600159741366 -0.070406024048967883 -1.8250591989015166 2.6267308940928711 0.065526726214022446;0.09673141965125473 0.55730037504556551 -1.2954063457040033 0.6357437526234454 0.11809833323445283 0.66993182089558889 -0.84085023487897137 0.050615245276415269;-0.090338688730549885 -0.58495046633433334 1.7809583986527358 0.13277123220660447 0.0012820298724277414 0.55404181656584439 0.72817071077263074 -0.020485823881910208;-0.073739865285805506 -0.93485420315939638 0.78027991448145717 0.018784811307126323 -0.034091474502027631 0.53904397044290597 -0.40998071168579703 -0.082350723383826249;-0.063273350685011831 -0.39798585002893822 0.22136969585403746 0.24444031567017915 -0.0038327150405779394 2.1664508799291875 -1.6847626160469091 -0.44428000832630055;0.056366501358503643 0.6799171498683787 -0.31756109405367677 -0.01402548270359511 0.023275546231918295 -0.16198922914959918 0.15121640273234849 0.041678902994369257;0.016359733777891669 1.2717794739137289 0.77764411801487887 -0.042627546525184905 0.017503426091682716 0.54737745218743072 -2.5781507333301357 -0.28495664917453239;-0.18540094607310931 -0.47028394469767776 1.9184128578695083 0.085423383030295008 0.034698286604498009 2.5101483122150228 -1.9998831480205359 -0.16513252939370529;3.0351699487877348 -3.7645908528885141 0.57754274125916072 0.13233515428066689 2.2275443858882076 -2.7315976660075014 0.84943275450201394 -0.33786892252471606;0.13185537610767159 0.50642238556045061 1.9545690263073072 0.092511415936747679 -0.34359636749980177 -1.4288165660176739 5.7753013803045476 0.097193840710067342;-0.028962799216796366 -0.2653175942287283 0.64850879253616178 -0.070640825969444099 -0.012184440998681899 -0.71861648930263988 -0.062849697853012476 0.030745133430725369;-7.1598443936215368 6.9657291111806732 0.30319886019444631 0.00023020718076850746 10.842027814727706 -0.5754207242877023 -9.9201541538177214 -0.39689441871679543;-0.2067297028245895 -0.50073545393420271 2.0995318378721133 0.094732516147989262 0.034337431600116708 2.7470845077291499 -2.1117651986542074 -0.16534265083492558;22.65057882241441 -2.1267705276834588 -19.178771858161067 -1.2361100113447645 6.4855364803400084 -21.056821412395553 13.978209881666816 0.49436065032265158;0.12859051328420809 0.8498890698910917 -2.7004722422772809 -0.11214994602689159 -0.080476006318309784 -1.4022477747484761 -0.31272690180750967 0.06682010504327586;-0.024995506938512279 -0.59217832918603863 2.2933040677239163 -1.6701670236856387 -0.13011118658977264 -0.66214538130786194 1.3380291497692067 -0.54592393160503261];

% Layer 2
b2 = [0.036323202546197919;0.021382309955335774];
LW2_1 = [-4.5197660762946255 3.0748892974843391 0.97748816520947979 -0.0095713771516638124 0.010795632926871555 -0.05444923123552621 0.025642093520235137 -0.028674575807342961 2.6856895466858588 -0.0074580987913918598 -0.03605351109267585 -3.9322085521029493 1.7150443050671449 -0.60875206801462411 -0.069803783849091069 -6.4047720499561347 -2.1737697825927742 1.8343126537908858 -0.065830464921741674 0.3828773580014358 -3.515002219216766 -0.0021078447507403486 0.0072898520593144573 -0.17925373304280481 0.37456305957833047 4.3221245845762466 -6.739400378718539 7.4741480524616044 -5.7032820540493923 6.7797708692413252 -7.2668390656314878 3.2141351245534691 -0.16694190534104192 1.0119782766337526 -0.95029088466799982 -0.041173140133306835 -2.4225900451963192 0.016929567473646611 2.5026628611622379 1.4905981253328597;1.2857545653800186 -0.78193248110561908 -0.59772515704911089 -0.049363838158825092 0.024412811373533582 -0.068613736942629011 -0.10766485917042015 0.1136458170703479 -0.75909268789619022 -0.014005316813770326 0.16302047039774761 0.4868312429544589 -1.5460326280124344 -3.6436158567396646 -1.2252279979824996 3.8876116836886347 1.5366215340351854 -2.6926868103006099 -1.2556446760570608 -3.2997023741342417 0.79403344010577015 0.033096553343926916 -0.032694096100635651 3.2494929047395731 -0.9456639651831954 3.2963175072387259 3.3554655031519398 2.6088872403500716 -0.75096424618797897 -2.0518659819285623 1.2046641929457866 1.2673455294189924 -0.044023494307592455 -0.65465094555539938 0.86180307595428118 0.13329894700264064 -1.0478612464861174 0.010051003576418758 -1.5759127208208741 1.1221224652556923];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = [0.1;0.1];
y1_step1_xoffset = [-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
