function [Y,Xf,Af] = net_naca0012_tri_fine2(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Jul-2020 17:33:58.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.0058834779328898684572;0.020938958734251510857;-1.2157085742966231567;0.0040089068496877971332;0.11319333272986320527;0.88287815630720667404;0.94138851926323796615;2.0614412710852851873;-0.25184124448683664621;0.41783994735095636441;0.55000418064916234417;0.86280531455828224363;0.37453590976013217961;-0.39324079914554832538;-0.026480073487544272121;0.10957104290016460302;0.0072208779421970492249;-0.57363080072542949051;-0.30468219422680820063;-0.00049208707760260673395;-0.92255623577051937279;0.93862178045316391195;0.2056453478649344635;0.88857727906529537787;-0.55027258757520458587;-0.16500433999566094245;0.93331460786706377242;-0.70866764977610818832;-1.3797071992540692609;1.1334542382980559161;-2.3570294844119286104;-0.36308955531345754597;-0.14845031361725372077;-1.5658241088581748013;0.94796593383977456604;0.49973656556881029811;-0.70445552004990141803;0.62928690109135054787;-0.034034425208321596179;-1.8095670476512051295];
IW1_1 = [0.014549760236535138822 4.5891113494941864204 -4.6987577929427253309 0.079624781746081049749 -0.027319138456099244933 3.5798281446066391176 -3.5154502500496245254 -0.050013066981726063409;-0.0083148349695683961696 3.7278273439685842838 -3.7456204978791949323 0.013125832574066485792 -0.0312690434543561116 -0.37465728742191295453 0.43767835823038453436 -0.040495401356202012644;0.024832113680687915164 1.9320622750047549143 -2.5538294508102410418 -0.024612134123718321099 -0.011375004209608798392 1.2890879087133155778 -3.4873413293660515677 -0.035940307342641211741;0.013391042300940176127 3.7778476714121511648 -3.8584587615428316276 0.049588694299739208282 -0.019007096543948154982 1.5492029943387257696 -1.5022231671897179339 -0.040421302841536263517;-0.22647708735051882978 -2.7604363239761031679 2.8988485670128207872 0.099574806593508841113 -0.069763208779648810953 2.2717324358451316257 0.11255638209528182059 -0.015287187798729597044;-0.038624412603018652701 0.33663738375545387838 -1.0170377059467936576 -0.10114764284439249631 -0.026870155831920945061 -1.8749472410790566368 1.0014564774733103469 0.0040167699956175310222;-0.010781257858825157511 -0.98621236964496306054 0.605890090413749971 -0.056121608338173617492 -0.0085681134468901312684 -0.85079506004166138844 0.13959538082842404272 0.015690362630752022893;-0.079032808552856756434 -1.5348289076818493193 2.1435483964640926757 0.15860798173955031887 0.067131210975776067773 2.222626628206463284 0.34079169848767842943 0.027917507903129461233;-1.7125842680093035231 -2.3524616119801873282 0.095062882334848136656 0.80128051758688301209 1.016965128701471599 3.2065166519378762722 5.5553172455468011748 3.4295283558963038928;0.17215289131079081208 -0.38887887614040234086 1.3156762813218976227 0.011628576912106025967 -0.066629714262225969712 -3.8066355595505814158 1.2954190784045740426 0.018059233822518283574;-0.040925843311645136724 -1.4558329997776602305 -0.71977084811218527971 0.0073414302500320900019 0.032483339459494817159 -0.14408036671026452913 2.2276544677619258827 -0.058359880195108682077;-0.13414627583620866713 -1.4840152136793176574 -1.7934769779684995861 -0.013386800233584369643 -0.029990345995300558835 -1.3981511369704267 1.1416825529179104315 0.020180148780945796061;0.38739668491369283476 1.7539213587679571837 2.5868150725827927516 0.77705728654909533848 0.27084553203343819661 0.93600368653719523415 -0.16215570478144475386 0.050965124515023239871;-1.842250105449848796 -3.1099585602339478996 0.36348234838224580123 0.95473896324196616536 1.1558199497774439557 3.4718766907706095637 6.611051841905496218 3.8604850177412726175;-0.084956582868564819999 -1.7488913893342832306 0.59879363491492010318 -0.022049313378805435876 -0.076176167381543924417 3.2877345817196683697 -1.8257356013875785106 -0.08073549492674156336;-0.23805196940309450437 -2.4372453913801619407 2.5821773743982130433 0.12314712620477716309 -0.064627643306913257204 2.4937856052127322926 0.0021667065847022948417 -0.023050780873219791495;-0.090130749517529085146 -2.597479451350001689 1.184316720914277532 -0.0079340425212142788591 0.020512632896647974012 -1.02347958096197722 2.3841586417529012643 -0.040978177449505832908;0.026868387227772141945 0.12708213047230568216 0.42924481770530331648 0.092395558300496241633 0.0036315025689405487468 2.189928666899132903 -1.694913552032603965 0.01210366856190191881;-0.17030572349509731644 1.4206126333894506519 -2.3753935461888948666 -0.017257262005179765246 -0.012279868217161123492 2.1240388267964700475 0.062420952355273014167 -0.056044837625308999152;-0.071672396396438409205 -1.9393672329436164592 2.0812393179302497437 -0.020352959344956900178 -0.065893406994058587034 0.65898227783803642321 0.11273408378150746867 0.011096470248750756743;0.0035870565012831438258 0.88018227169411022981 -1.4550437313810931084 -0.059210464651063596242 -0.02026029479257358823 0.043872348830765427186 -1.6652543634391339111 -0.0077336312625649362984;0.4529608728712517518 2.9790897412926717891 3.1210202323058862106 0.14390457084500854479 0.39805125987453182645 2.5757192746746286893 0.95898566384586358957 -0.15459286579369599379;0.15645039815513431258 -1.6926049903252866624 2.7682164521153724834 0.011360983714675804493 0.032545955797894231265 0.50114873055073305697 -2.4672852914914553679 0.076236547105912863542;0.39822628417016564528 1.8870936418820476455 -2.3476991351437144218 -0.12336901492531711366 0.27354653849217730466 -1.9952767083131448533 -3.0289493471538508906 -0.44839830381627182598;0.0089604835480807318304 0.23565893594953904455 1.1291483241849178398 0.1259944734229439256 0.010097043574946847067 2.9410666352192933459 -0.71588798112891804948 -0.065187205414023272065;-0.093166712281446267818 -3.252742747312093563 1.7766750872196470645 -0.018534300171659377765 -0.0052227461725066690046 1.4814837156300810772 -0.11007676890903042577 -0.053769656867537325706;0.082677689132681642104 1.1047189358881586152 -0.20038455351646422553 0.075318624333477829369 0.0060097838899901296489 1.6596673241774249075 -1.564035775294913444 -0.025586822060398872053;0.062133976379375593924 0.84333301638102664555 -0.12404908195574744501 0.072102810383772864 -0.0044665164246241754673 1.7740697280946549075 -1.6090336955650736961 -0.01401972363134010649;0.067191941044439359998 -2.7400531913562891084 3.8820474485463392078 0.15693872210338116746 0.054875340940963419911 2.5907610005715899781 -1.1284528981889219157 0.010278092637803470585;-0.021561927131987426026 -2.764757600899348855 3.2258276336635320902 0.05861310920019575238 0.015489529659090419539 1.1062720328263975222 -0.56836108406721796982 0.026993366310743813902;-0.21364116404203012389 -2.1500447684407189008 -0.68455994634473593674 -0.13757872146576169414 -0.016983667441882621674 -2.1313132546593114292 2.3897083981167481781 0.10548325968397409547;-0.013976302670437494927 -1.8161768761291743335 2.092777813224350858 0.030503934114130139277 0.0088324894853989456556 0.83630872445580750618 -0.5076942429127146994 0.02257969944230285228;-0.094510926672495679246 -2.916375230629033144 1.5693518593799429262 -0.04992254947764219325 -0.022671620276755059809 2.1368552176752726446 -0.85036186249803180637 -0.058305168155817800602;-0.17814092840727510647 -2.4479231264871859075 0.70470659035129701309 -0.087482323522030280838 -0.0086455226769174501472 -0.80118481749994530094 0.75275022279294356853 0.092872450918900617545;0.50686152732205169702 3.7123512102608917651 2.4195445882402055737 0.14141947242428712372 0.36542629300309448226 2.1907096662123972663 1.4475718046367740399 -0.18103149258778780673;-0.029279269426132750742 0.50530873377284124537 -0.32166780870954853055 0.037016559830972441125 0.056888994556969364746 4.7070218623120130275 -4.5217113939088413588 -0.012329467357136681543;0.07193404990457598347 0.82889732871162991046 -0.13304688419635213315 0.061631060084315764103 -0.011545650528744573482 0.82813865498186467473 -0.23328246425594731384 -0.042883903073776694082;0.0016273720929607419453 0.9931268062111027195 -0.76070437237595311952 0.040768517328813994038 -0.0024210311595122325536 0.50324563171406488937 -0.030973160858079655522 -0.013247476700734978072;0.001345630965572057209 -4.5518479053550739977 4.5297604844424101955 0.038233796046440504668 0.050315884923488547742 4.3226381362823866894 -4.4458590340603176827 0.073809178069204742223;-0.19930374663944677716 -1.7745301221368889877 0.31293977301095776689 -0.17480708953400667105 0.12115296586792442812 1.1247884052190413318 -3.8076479610668476639 0.083292246377081213815];

% Layer 2
b2 = [0.002940021008909308748;-0.45086663858950348782;2.5956251556956604354];
LW2_1 = [2.1036354852530516624 4.392706090121849094 0.23253039767356153966 -6.3743294387505127219 0.25868593795962030457 -0.87155880477712477372 -0.23132459595832957633 0.0026179165196842922071 0.0010344867828816354301 0.036546523880639586457 -0.043680315315578796542 -0.0083696332301853946373 0.0063057482776448063599 -0.00074533498292025436062 -0.046966252528419412393 -0.25630860849859710138 0.2771182093947207048 -1.0231177138875828803 0.078574631095132907443 -0.27041820904675978321 -0.56348321272768409074 0.10009892713355948712 0.054611339624562944828 -0.0027859526149725025689 0.040541469911865052334 -0.54700099758653586424 1.2412941880565140362 1.8335940455931540871 -0.027744325488114292277 -0.18219786358823433781 -0.022417979559607555812 -0.45113169670362524011 0.44387046177285433002 0.20380314936350149568 -0.10102374237365503717 0.098133434382618525693 -0.77069543445701493845 -0.1747840199148819329 0.76030846264392570877 0.05106589397782509282;-0.51074925546899785367 -1.7606056955260818153 0.066462517548221744512 0.54543243387892770269 -1.0059416075327720641 1.2213319709713585937 -2.3264930493484912155 -0.0072438526470506902147 0.0011560374856470073679 -0.034881207303117049701 -0.017349611029481057378 0.0085733337541603754639 -0.0019172591641256194958 -0.00082901226203393422066 0.15903798361479912216 0.87243486059300567881 0.011984219756092895706 0.69104746546534445706 -0.14433041703757085172 0.71138217227848143942 -0.27631062611913115301 0.049279979738575320491 -0.11481357680547446543 0.00073995321150289799454 0.072842463073927776751 -0.055024869435602252743 -0.099149232664475450694 -0.17505033540880754472 0.33758001900834572195 -0.85418085686687250657 -0.05022645558003682037 -2.524825033870717661 -0.075514366822412970492 0.11165315553355745215 -0.049968136397558239603 0.023128887579246280165 -0.31493213316617052477 2.8025969844487716998 0.16603839692040098241 0.042939038129118672904;0.71360340982547532107 -0.60959144065777481902 -0.029490034486767433691 -0.47493415630968832675 -0.66377283345221260724 1.3161559432598419761 -2.8132873649980836284 1.1566669140619896261 -1.1454220561833494685 -1.6359507508450594759 -0.69418686912266780453 -0.49335631519318312588 0.098971526246599036969 1.0672891596439111339 0.1574102059642534801 0.61355185340989915055 -0.40548743947824922307 -1.6326154152946197318 -3.163039707561508429 -0.52316395825239858652 0.80582047850564386682 -0.62860682937523137959 -2.0475367203852710141 -0.26657159401466895554 0.85244779545675186672 -0.25795914017859067346 -0.21026119565050432891 1.3963798604077559684 0.47210164884042415956 -1.6976670039966492709 -0.91715747164913918876 -0.37701217740126014011 0.95110736155897357413 0.77599800210120639665 0.42213384626063665817 -1.1883244520470082062 -1.4334805000856463142 0.10856750546103963173 0.6148660487332279212 -0.058045999196118448771];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;1.59778745470188];
y1_step1.xoffset = [-10;-10;0.000930762255008352];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
