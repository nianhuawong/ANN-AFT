function [Y,Xf,Af] = myNeuralNetworkFunction_naca(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 06-Jul-2020 10:55:17.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3041221355884426991;-3.0057176522450004263;3.5760740715366972076;-2.9870634745869462101;-2.4639217366357550887;1.5670686642545839096;1.5240199178677498182;-0.80773825057852610687;-1.3094453793914080375;-0.44139078559505656729;1.370807138287911453;-1.9885080801332193357;-0.80626426077693813532;0.80057268863973352069;-0.600415268202172836;-0.021955348994332254953;0.030727779411834070522;-0.023631777378508880133;-0.022112258271654798569;2.1696068078795422984;0.096612166241442073988;0.014255799468578156733;0.0023543270330176678355;0.81086111814446681922;-0.0093866680346522315265;0.0018640963490583037278;-0.0027160720563004087102;-1.5285943810625228778;2.0029984466927679421;-2.3997399324854078451;2.4521022011561388609;-0.79562974455750667957;-1.1304838023178891415;-1.4685834969109374804;-1.15096184360943532;1.4434016698750291585;3.2239139444255888733;-1.9498951536266027063;1.780909024993357237;-2.7222518395256321];
IW1_1 = [-0.22222112564283499903 1.0762481296203507686 -3.0976361911194887355 0.037755836635352556241 -0.037302441613513835639 0.28242459509908163229 -0.53901991042846442159 0.17390732464958516545;1.0462383184691133042 2.3256056213817006828 1.7173448986627801727 0.34672508340216362521 0.19875384143228089218 -0.47585657177363716031 -2.6794730711789847 -1.0357223592119253475;-0.31212477996793291934 -2.6045005152336444532 -1.2459674399648716925 0.08781131235378281108 0.020956540367679171027 -1.8745308951858141722 2.2012651600931643081 -0.17882649260928426549;1.0011075243792575407 3.2489305516621498349 0.76307246950699614274 0.35882819222697703854 0.14382131750234142253 0.56130300693755574848 -3.594636769896956352 -1.0535601252268695927;0.18253305811695874628 0.8078100803756120829 1.0122199203957360503 0.10922200701502640663 0.1138587644405568422 -2.6282609731529342767 3.0501422720418607248 -0.002583102826626422141;-0.074292490951448089676 -2.3365510431711702388 1.8850686159511418349 0.013432887037374203684 0.095309565706969842647 -0.8811404758132596049 1.6975407951295293785 0.013122226123363455591;-0.12238340956402066206 -2.6121554421827708481 2.0193711350499516932 0.011377270298521008351 0.1733394765930303949 0.73422744435701392529 1.6880141252232643279 -0.018212186470077326023;0.12354948428939099836 2.4056005451817648044 0.35405427085726898229 -0.49988083542354605493 0.51239570625008001858 2.3120557828431946845 1.8637474738125099361 0.040219659215987101086;0.0081591288822079697379 4.1328223029065274119 -4.0061160625313831929 -0.061225692518851869417 -0.079582895609788248392 4.3980102087255223964 -4.3021942263664305628 -0.099260316426987099669;0.093789142949725498588 0.14627324869136146268 0.83922950263237905411 0.011423185948384560751 0.058726785207087059404 -0.24168073367030051823 0.48349582450395384159 -0.061949235978096747757;-0.10845694052318043121 -5.0672844210296092982 2.5569296264115433104 0.073690813275317915143 -0.14952781166676085145 -3.2736429317226338753 1.1027348652841983956 -0.060093419706500846023;0.095491370274950679309 -0.73507789003467505218 1.4340563487548703137 0.053848209883112584107 -0.15696852204073830084 -3.0812439452447697441 -0.19137597687971272253 -0.21418242596701789204;0.18676470179582382869 3.3232427336612304636 -0.37970253130740161396 -0.56437148574813655877 0.51192804059344187984 3.9965834631220880091 0.62020920129321022163 0.0032410895381252773605;-0.22311269160458047089 -3.925951544912929414 0.87088256411052455963 0.59577567253515473222 -0.50461949162200259167 -5.3155030806229897067 0.39965191426947671571 0.02557595236220758933;-0.054358173182698879544 -0.98085066949598664898 0.71418439578747439089 0.0055716418160046332284 0.076814346349358755828 0.14709132100847280289 0.63988351348310879008 -0.028619523284938462593;0.28168356790540283185 1.5890952647128597786 -5.1772692605987060688 -1.4746963947265230299 -0.65311971001119351055 -3.8272628012847857981 0.25409242518225877427 0.70401742380922183173;-0.35741569207920820261 -2.249369282112011259 6.02533098889974017 1.5613525625128656937 0.71330090083924169164 2.5431423857621853202 1.0237387583547878922 -0.62269345906544026903;0.092560047708678150347 -0.40496267405084063196 1.1345106222412741914 0.056016868373573759643 -0.0084562670421157361961 -2.4445024473787078101 2.0198907284593228262 0.14066468605752421861;-0.039072693760561119647 5.2628066349890572084 -5.5057973405763114272 0.27232643558424091124 -0.068402113058777372356 -1.1596893305277502506 0.88448395848233318794 0.33008321419574843114;0.29528138519177521415 -1.4650112099649212904 -1.1679341658700312934 -0.5446779923823285019 2.2898931429587516817 8.6228312448504222942 -1.8894915999794339445 -0.99696074432284431666;0.45822683101862093924 3.3658646234798768049 -1.4687218460067310577 -0.23383225684127290078 -0.040292987555402351441 6.5627489325711589885 -11.353604342886933765 -1.1915227917718975714;-0.11860121589902640482 -1.8567672231720120379 1.337149223170331469 0.014285077280464908434 0.12813538420302056364 -0.59698587879828701741 1.970936616832107191 0.045850614800505763713;0.048495685832223738021 -0.79522561199314578673 1.7843908655485620773 -1.0373453452750633907 0.020143481345003513144 -1.1188636857546574443 3.2044366269251569612 -2.1026564284722808473;0.20600895289697551682 -4.1746204417873249426 5.0981231206577399817 0.30980024373279446692 -0.24733749409556285426 -1.8735669941430026508 -0.58217688295865444026 -0.0010060200021943493508;-0.027672528858982449462 1.2445710388012840575 -1.544517225565570806 0.32532317734646304386 -0.027024576964125381767 -0.23703360672141285392 -0.37256493619673530793 0.63503201097802497443;0.027397447259237449335 -1.5762970057726304329 1.5827756912848627291 -0.022873666785949809538 0.016571683698224953796 4.9807641439203340639 -4.993460907396414683 -0.0075770138468189245085;-0.021697888785953536872 1.6199570449262292726 -2.8297569115243663695 1.2251709346491301833 -0.047913502234638423449 -0.16604927940105315698 -2.1654760480530663713 2.3754692493523785757;-0.30090217054569012856 3.2082554049652407535 -5.8332868328742799591 0.15220704588002059721 0.010517862513964713889 0.69037510855704076196 -0.71651171960163217989 0.26523460210920446478;0.054693027663907892166 0.4912849006249848105 -0.73434524447639271116 -0.039255042949850368905 -0.1603975398897229121 -0.36403776035727786198 -1.2186845713725442675 -0.075774870865030194422;-0.30986472980725893178 -1.451172269988028507 -1.3106554375411050284 -0.016267751431496463993 -0.28122007389524111831 -3.2345061751210018031 2.214607294244058 0.05309027784908221248;0.31833044734390253394 1.8364043802129537131 1.064116110508150026 0.0078181521117759115308 0.27083949026590398157 3.5068763612377771288 -2.5210671705370475415 -0.058765740810481990886;-0.27376672587022365946 0.72706351385781708974 -3.1136609916688988697 0.011787727195088391202 -0.12235728137350580791 -0.24797113338917231573 -0.30521266666724694572 0.32957261117402636419;0.087442443614045059497 2.5399756665967943015 -0.63349412731125065434 -0.01048183705990745479 0.14661378716717896054 2.4559676241662180551 -0.68386203111873888894 0.020790060288551730217;0.12068612563286475192 0.28154652445890071544 0.87469530179762122746 0.14605810739888930305 0.088846902061997440336 5.0119854778872872103 -2.9405504082479874128 -0.19299183950570050761;0.0093825965283210726459 -5.0225545039700119077 4.9882032990052094235 0.10090508884379989496 0.099025075920201460766 -6.1643279892006281884 5.8272749891679538337 0.15630680268831342872;0.075688749823243819947 -0.43806389503080922498 1.0846441815710641254 0.12219753034198747865 0.032166939439383424038 -3.5024412975642271739 3.0260667764522772849 0.13214653118059813131;-0.056030216162094234611 1.9501845393770123049 -0.92524964242400487002 0.034808840978323832283 0.48504954897145280412 2.4599644117080243788 -0.096881857389884473708 -0.22362616597065490542;0.027409503787882379122 -1.8410672720763523458 2.5053122999430579299 0.047267940791929911881 0.12586499964346584135 1.2690728821683436855 -0.11708987426239075846 0.033200491693834474627;-0.031749738122834603171 2.4108590983446047673 -3.0135312386236159377 -0.030262053672650765512 -0.11093392623461002799 -1.4794847311840439996 0.48671297791559831047 -0.027208876596987313645;-0.33853811224048691031 -3.4822051503782169846 -0.1180399403213495263 0.083384652575057241486 -0.28178527855119439582 -3.9336994168193992749 3.051942646219918398 0.1064612791320265206];

% Layer 2
b2 = [-0.58804127061528654874;0.22101821895015374975];
LW2_1 = [-0.19194518977404340099 -0.017595841873822914286 -0.0098655813903373665991 0.017445346738504688422 0.19950274730767067477 -0.15511036210132106428 -0.01080427944926514415 -0.15033760404130214194 -1.1916997304439602701 0.61470979624139088227 -0.038091626490405143535 -0.012581974795633924305 0.36986562049999788249 0.22560836525992841728 0.12759161693214204902 0.070664487433109768322 0.065837639034497047463 0.32665516024179291898 -0.20942820758058011688 0.0054068489259305706207 -0.0082730687801116156721 -0.054925069231523106217 0.71173507995645612922 -0.0088602041872011053081 7.1775724396894311496 1.4010067462452280296 -1.3035194914537069355 -0.023368626027292904029 -0.066135873928198696259 -0.56638076287822136656 -0.68948803681523551656 -0.052248216836682487285 -0.065763346399039065981 -0.02439915597429961891 0.60757047739657854546 0.46473779599841880117 0.04362528520287185102 -0.90180673789579224309 -0.8258538413856562066 -0.14264030811598973902;-0.074638800077391723176 0.054560546119491293293 -0.013581535623703868548 -0.056895591490249683431 0.098416513176972850174 0.89618256225874093346 0.11965002484667544569 0.24010803395938182248 1.0026198421443275333 0.34406391768970689959 -0.098680224278662867499 0.035194888667807129601 -0.51635736284754574221 -0.28838768955877508438 0.86423966692801268419 -0.037862471976422215625 -0.038570660287827074342 0.09218962957818568893 -1.4870207904731573834 -0.00049370079836526833787 0.0027160118688789023668 0.19384426994972378533 3.3312758402126325663 0.014912299792217182867 6.0503297993023696932 0.51918451282097421995 1.5600169465445714589 -0.023779697945155595096 -0.32785898079414954598 -0.40287076075582745061 -0.42280877723291421244 -0.0043909861423875118716 -0.19406409984886668907 0.021282826037549735371 -0.43138781966481193342 0.0074866799519353512821 0.033563586341870357832 -1.5381756461965556682 -1.3134136070130257856 -0.039355531986172039016];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1];
y1_step1.xoffset = [-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
