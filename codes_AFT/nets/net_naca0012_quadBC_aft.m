function [Y,Xf,Af] = net_naca0012_quadBC_aft(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 22-Jul-2020 08:24:31.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.962587692132752748;-3.4453287991218539688;0.28885985802859737159;-0.52521597675365505609;-0.26893871355283188729;1.3579937177765342149;1.8853278807409807882;1.8412977519391819925;-1.6040785686906251506;0.013138655275899021463;-1.343814249834650143;0.021619468254394990508;-0.62460280727086847641;-0.23005173903029266236;0.62373069743999065562;2.3106449730831428724;-1.1647584382282254456;0.8503832018328377762;1.5647217515913331987;0.86411057852420036784];
IW1_1 = [-0.16649731910700835136 4.4996739379898818001 -2.8302815707532085199 -0.10741124901654722223 -0.019483621555782718038 3.272981150592794819 -4.4740782375301808571 -0.19951626332318345147;-3.5238652697697481209 -3.3402801644927202496 3.2879750441264286032 3.4239899478931170584 2.8747422818809598155 7.5098470353739417149 3.5679941315816554592 0.85223657789175244481;-0.033483003948379351511 0.82173002171775699765 -0.55939995794819019626 -0.013330486967524259392 -0.0037861814670528434572 0.59515170647920290214 -0.81456145483616926306 -0.022073686717943276359;0.29117374710186066933 -1.5615522174561113911 8.1779930297460641242 0.046577506663939477471 -0.059318127717683452604 5.1992811293002825224 1.9698248786605523364 -0.022005887698681825954;0.24124057583908897762 -1.3772157194910703559 6.6928882417409649719 0.053148243914413924316 -0.017497963894289824544 3.9879605054148092869 1.7946987934771059248 -0.033581163876075376118;0.038581264141085487573 -9.3330035802882118645 9.2816289322378828786 0.01097095701575667194 0.0056236559634066417626 2.9214450998798127124 -2.9371679070233089881 0.017912935510803459915;2.1663590697589056866 5.0337200702560025434 -8.7935049009040113788 -2.8348520728263069124 -2.5230816323996467787 -13.265773914498419472 -3.0807931250772573328 0.1831086486906899069;-1.9210442590860070666 -7.4385249354464297866 -4.6521526002491873086 -1.3458183702631094647 -3.4643027456602886183 -6.971305758629886995 5.0500974106947396081 2.7109685781061991783;-0.13408790856914457046 3.5802856140936776264 -2.3509424204166875505 -0.072608240496784354212 -0.014718052197265740766 2.6505248127671094949 -3.5608827327570402588 -0.12627068774178623611;0.0093764872386117338598 0.085308807320607707436 -0.11991389855370776507 0.003730096074932416194 0.0013514768230091815313 -0.5704833280918713001 0.59414797304131217182 0.0075362993243970324495;3.1943326914382024206 10.206018349042862425 -9.7600180317517999384 -3.2446594981469836227 -1.7796474829208142054 -9.1347437103998370134 -8.3167499240966638041 -0.47936735389457085788;0.012451206288378225198 4.4912263120686466422 -4.5087139941521021669 0.0042587699487494556569 -0.010505593714317199711 3.9649757668986889136 -3.942264853320282203 -0.0062769776197386176197;-0.18916602040622948477 6.2527600967011913724 1.3023290806230345407 0.38307872989146252163 0.11920458503708507292 0.28771118187963107271 -8.0002582261354877602 -0.3167642068458680904;0.34324079821328651319 -4.5937693136815749284 -2.1570405165573114381 -0.30402130859647913397 -0.028777425449045049982 -0.99339663122317878319 7.338536621755064715 0.40344537690676418595;-0.0003025017797325958149 -1.4914332416413871307 1.77410345547727899 -0.00088067068036406636472 -0.001149080116825785397 2.3434525766183260664 -2.0414657216968117304 -0.0060917509241567363229;2.4341399312888576389 9.1799974323199453607 6.63641446941980373 0.90323246097795728549 2.7385707170735846816 6.3575652818685366441 -7.9412344517370652142 -3.7418967380817895751;-0.0098418615402549643884 0.18854727722150915747 -0.0059882801774259319244 -0.0098696590338475040372 -0.0034964701709771727443 0.91360812785754175191 -0.8336119513188762209 -0.0064750901925947155352;-0.0090299691313749184257 2.2969117415943340887 -2.2797331457696974333 -0.002666975445251480465 -0.0019920930324632559437 -0.62116430674044675886 0.636572263852447362 -0.003866422294230999375;2.7886943557503358626 12.209475353497609262 -8.6531996522062080146 -2.2482865518396661919 -0.84341273497309843243 -4.7120254471586999756 -9.392161238927068112 -1.1768001128198419813;0.0026175328235490034033 1.6683425835643834745 -2.0568432955322908384 0.0045830133161369806735 0.0029489315636064502603 -3.0476135312093690644 2.6582960604476086885 0.0085520306728952034947];

% Layer 2
b2 = [-2.2482627839876911935;-2.2674197377652096641;-0.76723798596903014513];
LW2_1 = [-0.24780670179357788818 0.00062825898733809032882 3.6950788212484564355 -0.0012385494711402498906 0.0023529160570656994234 0.10910864131100765639 -0.00052218672687646418805 -0.00050396534857453955704 0.60738655229030824589 11.719462446537573186 -0.00049783496639931696607 0.2303470975765742057 1.5155168241476290504e-05 -0.0012596687537164879059 1.6827927342342503536 0.0005995490274856637037 -2.3888416918058412719 -1.1125091394874557782 0.00054999110517677831083 -1.2179194274615467997;0.18889458882213411295 -8.2322346445298924056e-05 -2.8066184044336757175 -0.0044888051634710381468 0.0056699994155699215762 -0.5434286948183166821 9.0146174993830787228e-05 0.00012601694267922364289 -0.45718769025737676648 -5.6834691889557422684 -0.00020315656438493867706 -0.74358452513055539601 3.0999042278498999234e-05 0.00044895188360719891609 1.4477891978805281781 -3.7824674150487762412e-05 0.35550409679067301871 5.026082037471198305 -4.5528007327320406459e-05 -0.86177862261498072716;-1.1320332824188317211 -0.15905108180301125165 -0.044389641752672903685 1.7210224866960628365 -1.8339192597331468448 -0.3467583960939604748 -0.24657620856209891413 -0.1431094122575260752 1.4723885021789417937 -0.43135299248225922319 0.28754002236720349606 -0.14646109784169167312 0.4328102288921880092 0.41002847337924552829 0.36929748382918670124 -0.14090620755816399279 -2.0961272577930607497 0.29733388013542244588 -0.2535273373746645964 -0.28810697570703891479];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;2.94753065501383];
y1_step1.xoffset = [-10;-10;0.0858786424153714];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
