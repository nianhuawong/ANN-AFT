function [Y,Xf,Af] = net_naca0012_quadBC(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Jul-2020 13:34:44.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1_gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.890470430638425;-3.4109095061260666;3.8803225727614183;-1.2363595633729232;-2.061921279152406;8.5423972577690765;2.7579042746555045;-4.257713484550397;-1.5182016024425615;-1.1826999088377392;0.55464325076965515;-1.2295987214054371;-1.6754396203466222;0.31718176542830423;-0.47001988065688466;0.73818785261497144;1.5090671898297201;-0.65816353799101091;-0.57995742641444903;-0.055011134724530723;0.42425111399718396;-0.616068078665852;2.7863049941945892;1.4949876018266417;0.1056657696153926;-1.3257657769551345;0.18709479436448387;-0.97141712340773945;0.011074585866090511;-0.62100002925258424;1.1658447166193757;-0.86494307382586455;-1.055457101023322;-1.0680518267191743;-4.7258903311200005;0.89548295622790575;1.4818941485834789;-2.8031625837012388;2.5827508752908788;-4.3886898589003556];
IW1_1 = [0.86180267819562206 1.1914797119159635 -0.96656466324293422 -0.99210272811031464 -1.2246017651424932 -1.6623043831208368 -3.7256945275727977 -0.59362927828942258;2.1027513546279804 6.5219027990921665 1.9692590040510267 0.18181312861400595 0.2678259190455104 0.43712446612639777 -5.1063165580451804 -2.0219366606140543;0.0052043622288190797 -0.82402162658544464 -0.65341374487070436 0.024054144958504806 -0.068453676406829353 -0.13366920912278779 1.649792545640828 -0.15778995437881005;0.52433759705759198 1.7654516797738449 1.4977233873335729 -0.15470804167873906 -0.41913797696879518 -0.45058686953414345 -2.3067291916355828 -0.70969089651363126;0.067088297645089348 0.012392784262097323 -0.44041702321052667 0.47760466113147698 -0.24862555877146253 -0.32609663118123761 0.70936768180994225 0.71119179385825737;1.0613025777407161 -2.8038224743248978 -5.9833286369702749 -2.7084630054212231 -0.48582855532377583 -3.69066305590421 1.1517599053106102 -0.13933272153232928;-0.8990533237141124 -1.1428775148157777 1.0298794730693301 1.0653069650374887 1.1634371552786988 3.3373551740487297 1.837686852512751 0.62145153731818348;1.3241154759816642 2.7061224337008758 4.130169909230756 4.0429547063915328 5.0251712089153093 5.6579468266784376 3.4795247227023847 1.5083654849224231;0.0016675783045040637 4.6204960869319764 -4.6418730660421508 0.018977146054214265 -0.034430477727774314 3.2919058829053705 -3.1951960090258078 -0.059707917533998713;0.60102328373015246 -1.4995127255650951 4.5982156337662818 0.01189374345400564 -0.34643444632214332 0.3506362499534838 -3.199036661689397 -0.66160402508236626;-1.8675550180478966 -5.1920636432610205 -1.50176913127377 -0.076794694421725762 -0.64261216630924356 -1.7593893846179762 3.4834169858115835 1.0765376683071524;0.45450041016660025 5.084486943884138 -1.4141487039027523 -0.29854049288379431 -0.42536661840811041 -0.86963590258684886 -1.6967344102811379 -0.81904668663984592;-1.271042266173851 -2.6395779730810065 7.0748582326762159 1.8369485166439987 1.81410038353091 8.6499655855513033 2.446129337947613 0.53114734252086349;1.188014586615266 3.2396404570050161 -2.183138168862508 -0.63617138396443873 -0.80809029702208413 -6.2017985231004147 -3.0156278783203061 -0.49590691231153849;-0.052821985470931553 0.71586745540167862 -0.32712301465744603 0.020400489513411554 -0.023382869642708144 0.39919387132323925 -0.48093316818897675 0.0023982868807881155;0.26258185135198386 -0.60828389946157524 -8.1195910743845587 -1.4575914516168231 -2.3638949706555472 -7.1981762336041397 1.1434939168199942 0.38989534822579575;0.012135145404620769 2.2077885106337609 4.6608450660356056 0.72498879814144901 0.81181621087022227 4.1945467790989461 -1.3600144148065492 -0.35429408501332055;-0.018688551898422098 2.2344207051337057 -2.0971550687856682 -0.028114991620621421 0.012199252053732132 -3.8238327857143215 3.8432974481246287 -0.01253347233708435;0.06537851364608406 1.650718373981416 -1.7962387555522796 0.056955631875123085 0.060052799984158703 -0.20474479038830623 -0.59765899094129893 0.11613131218670548;0.025473302010586452 0.82826941864627279 -1.0467114052235948 0.028844032138841603 0.01886828431180029 -0.42831693526919717 0.33056754732947485 0.051203315183971247;0.97263786762546678 4.1782634852676974 -2.3729863448030524 -0.44686547479154765 -0.63527386904407857 -4.70272254418619 -4.5366882248870608 -0.36520187395140458;-1.0220892035669862 -5.7406512907157961 3.3707591125889969 0.45502838433513143 0.6644437436905094 4.4875915568734621 6.5505219028903978 0.38217843864804885;-1.0600172306739826 -1.1525573472715738 1.3956705508899478 1.2940382713595182 1.3891969898391623 4.3160932554592 0.92845914169545085 0.70333616182781833;1.9364535785669454 7.4364309346949833 -1.6455501665386691 -0.10712345460313838 -1.0266460751953466 -5.6166558007264413 -4.6824330790953033 -1.1943418232657126;0.053221023499635034 -0.34440948370376462 0.25031810487341216 0.047204438769677691 -0.0090490510517352279 4.4199604521132851 -4.4290051549276246 0.019814245405442344;3.075162849264943 8.2317017116544591 -8.3902771187772434 -2.7582640500732731 -2.3470235994551407 -9.2909682142358641 -9.5959384049646772 -1.8954499716369346;0.14639513898274606 0.92244828144758073 -1.9326011561172323 -0.1560013725263944 0.14284664893885529 -4.3550365992890772 4.6411588302036728 -0.018195793964505592;-0.13181303966339353 -1.6239559506270289 1.6785015272412478 0.028657930554927134 -0.20487158300562805 -0.87105475896535478 3.532271935775062 -0.15133117715707861;0.040424210902637023 -4.3061644712699492 4.2596193748694553 0.017823270718106552 0.038406228277430177 1.8152074775888902 -1.913302548193019 0.06298588068323252;0.29020365333834852 0.44908899957496501 -3.7832719140674063 -1.089469883090763 -1.2768933869798547 -2.9646985294854722 -0.87646302905654516 0.0025517371390320165;0.015448367436471235 5.0044261654794235 -5.0875246913652612 0.059504637292785864 -0.048263718509911867 3.9850108133725426 -3.9087016654229627 -0.015825247886025226;-1.0840714231511623 -4.6631026261511064 -5.7127699738101061 -0.31812603220510421 -0.47614208422295096 -3.9817646465778371 7.7708307921884598 1.5096396689551403;-0.14606688725711434 -1.3642223480051241 1.4127617361497942 0.030420072670703388 -0.2272622920325916 -1.0410130164782914 3.9661424903887683 -0.16530531108483296;-0.090460291398152426 -2.2490837759192788 2.4707588230526789 -0.11220230150676504 -0.066691241342175966 0.51392293740065442 0.46602317950576294 -0.19467882004260789;0.35913076914735914 4.4712110873076121 -6.009170615323189 -0.85735439755135312 0.14983243466757079 2.2988536779384541 -2.5069573314149243 -0.25225233000185204;-0.014254205853519218 1.408249633197143 -1.2567970878484285 -0.012455191745246143 0.0025420258230117515 -1.6719149592810183 1.6640987104960836 -0.0070978777293032288;0.096628488689688596 0.90409883971950178 -1.4631151222296264 -0.055457224905044053 0.048488825196645921 -2.888810327446091 3.0381260289890375 -0.023301110521285629;0.31675553272692225 0.78050570975350986 -5.6955429158346975 4.6395864393151705 -0.67821834121804725 -4.7903602319226231 -0.62565050030149616 6.3395845220425002;0.03648620403327868 2.0212629051622724 -2.0323041046264492 -0.14244800983365052 0.2075036032861893 -1.363821614280712 0.58038513713957296 -0.17535690872095533;0.39220161543461485 -2.9963692563653193 -7.1736881593680186 -3.0036474343830961 -2.5753864791837828 -5.5519605888836834 -1.6888285203492268 0.33046725456516807];

% Layer 2
b2 = [-2.7031389620146333;-1.5373629136085647;2.5426759370153675];
LW2_1 = [0.027389458289454396 0.00023267656556707168 -0.049971990350559964 -0.012934700140395607 -0.2650409778927959 -0.0015112634408791779 0.03203597470487092 0.00088326731818050828 -1.2573704668981329 0.0085918265415692602 -2.1230500697477357e-05 0.0046258590023236417 -0.0012153923218177741 -0.0013222871479222451 1.5569766691612303 0.0011156643785485128 -0.00023192846774834551 1.9012940581272217 -0.082265372516550611 -1.3183610606962128 0.016533624561613912 0.012369977095185081 -0.0056803164204075425 -0.00045718702003651727 2.393684515450837 0.00034110356693855881 0.080316825219234306 0.22023893291517341 0.69144120860834279 -0.002037894867980812 -0.721895668841115 -0.00049967842843763567 -0.18630890730324065 -0.10412966309651239 -0.27238446296701441 5.4919313479875829 0.72034103122121074 0.035474957826453442 -1.5487223205832301 0.00058971088265239423;-0.037251564863925585 -0.00046594581594912012 -0.034260545964801992 0.0016099667412908653 0.41018171245961244 -0.00033670804401819416 -0.056191028841585063 3.6427344958870342e-05 1.7814011961391627 -0.0050735448232096638 -0.0019813779817246871 0.0038981945114296979 0.00058122378636847952 0.0027833780446884695 1.0433254558828653 -0.00039564096314146307 -0.00034859122303702953 1.02430220011462 -1.6354769124838076 3.1982442752157261 -0.006680211676138202 -0.0050447551044227792 0.017148146300640311 -0.00015801449433192264 0.3823171954612542 0.00034814017461137032 0.06186042459204414 0.37779773712315246 1.9040284438016137 0.0005001295428661962 0.8567054419470802 0.00075743601105314516 -0.30021307386261264 1.1148390105162456 0.3890623950768814 3.5767525795011301 0.62341649612384786 -0.18512649758205113 1.2125281275656896 1.5329725220783823e-06;-0.46106972565761356 -0.18322074985283221 3.4484186523263585 -3.2070728327933256 -0.76592553990350654 0.094653677839701453 -1.2933619154246878 -0.075172632993446731 2.9108829473097786 1.6100677902300722 -0.15944290101993375 1.7490337279147972 0.18324725737319567 -0.9736874433991759 -2.3032865201575348 -0.20779092875568678 -0.22779756318991537 3.3148313153565332 0.17000924202987994 -2.2166656331026666 3.1203667050646895 2.1365701325020017 0.77949366979904156 -0.18575748961240479 1.2815312757429804 0.20432628271345654 -0.22338212935300114 -0.31116159155879275 0.26217930072321044 0.27632728774556026 -1.1086326274888307 0.23340278800508105 0.043442350679919362 0.58685301127809619 -2.028184419969763 -0.18575371067849958 -1.8836542013266533 1.5941200905809847 -0.59046917099052243 -0.15836937362611866];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = [0.1;0.1;2.64729467290661];
y1_step1_xoffset = [-10;-10;0.0534936894945998];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
