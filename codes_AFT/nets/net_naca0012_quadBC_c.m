function [Y,Xf,Af] = net_naca0012_quadBC_c(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 21-Jul-2020 17:58:59.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.98466669376381399381;-1.9181754357400262467;1.0810825420324623458;-1.6450084392700219382;-0.028910133406071115286;1.2395101617537167549;2.0092008532525191811;0.040474412969426915021;-0.73027551604855756029;-0.0051610468065633437543;-1.8703191655806581384;-0.19040096152829194542;-1.7482940399642963314;-2.1147782391834875071;1.6476433069703155798;0.45630640336147321179;-1.1635271100798860733;3.8247724085772119018;1.7225696412878055419;1.0792801050714064814];
IW1_1 = [0.14165106232172453016 0.61932933774459497656 1.1047687355867159553 -0.018681821899279769938 0.06729683683120989135 1.3053110535892427091 -0.88750465225084629317 0.1623076356929854247;-0.43805077498372885225 -1.9496647152832968786 -0.20995858349163110113 -0.060821925094642306786 -0.15869787892224157533 -0.58802767265652799988 2.7750012545137408004 0.48216143070885031374;0.0049669566627565317485 -2.9552797690099841255 2.9603840767735460915 -0.017100117513023066484 0.027237113994129081435 -1.6284566867705838611 1.5736429772173348152 0.025795390668226506753;1.4143379000588629513 7.6030111686747439137 9.2655641053268613661 1.5344143941609202919 2.5690985229828284808 7.3390556070332371164 -0.56617383745607463563 -1.9382308344026248914;-0.0083708591481888357938 0.94950206073726273193 -0.88173326061988410718 -0.00055115227411608330461 -0.005416093872563984904 -0.053802734123674395006 0.067232082608117249567 -0.012791203836995359427;-0.23801436870069409002 -0.84791357710437276207 -1.6199597411771111677 0.054608933422670806468 -0.084703698574601624105 -1.8717492632841301603 1.2645270647897390859 -0.23572812212891139372;2.7393895887803516587 9.6502783336717907758 -6.5009788573662330435 -3.5730838802800004572 -1.1590741520749678894 -11.489129523322379356 -11.267707922350538752 -2.0842206735988533239;-0.014325446687167679022 0.41976377209032084137 -0.55709551199220275208 -0.0076567521805742146113 0.00099683496843388412836 -0.68266376225801006505 0.69361845143934852675 -0.012449484679118619224;-0.012088947490507271146 -1.9712142116565622985 2.0052398603518377662 -0.026410518822908742032 0.031764838482090683447 -3.2159783778922652608 3.1752607074603949044 0.0072325939973780306938;0.00030954158493450966566 -0.0052677915001747531443 -0.022156458799762152739 -0.00051527002022170849491 0.0017686975751469854404 -0.31445424616833117515 0.36945151557741734427 -0.00096361267844553323558;1.284235653542092459 5.9130365870846173237 -8.2139951626903755511 -3.0616966537576111307 -0.71702329481135562705 -10.031460393053329483 -8.4605123115334990302 -0.13046720431515951288;-0.015115333085463564938 2.7374535733380680469 -2.7141686092621344351 0.0042545502246302052338 -0.016535565500357063407 -0.13763515821524116567 0.18924518952056951226 -0.033545264077498367083;1.7604453678888534185 10.488387562310174772 -5.0120066180707913972 -0.70130607105821929359 0.11292721131280920865 -5.0445184225706762859 -9.8266732054516108263 -1.0219730753528686318;-1.0236351699141696958 -5.3310226638647266739 -9.8489209606027259269 -1.3981873007883942606 -2.8264848297291762513 -7.7383127428248315027 14.412903607904821612 2.7245862097647002287;0.17802030609869010092 -12.90298443463534106 12.55326255914566147 0.13511610742759239123 -0.054803605446884812169 18.095499570626124353 -18.296045748926843544 0.24368721670026993742;0.024308716195616378308 1.3455533638324885803 -1.3999970269491377461 0.034196177311229029872 -0.03232822840742554521 4.2638565538799815258 -4.2353449194518670851 0.0059029501365321689413;-0.03782831098523493224 0.068423345947907623921 0.82847449718261778617 0.16631460676997100734 0.051022423386748075314 1.2326811774416432943 -0.2091620096843132548 0.18763878821487417481;-0.33744639145029087235 -6.7657958658679548947 6.2151751461392743536 0.81937910403454849995 0.074034789399285358402 -0.10242466200663152831 5.1662295340705526314 0.85496003230965655906;0.38116197405542867616 1.7573145553969851118 0.37821407143334206946 0.029305365638687901064 0.1385348802907493404 0.6976031612479141053 -2.4986597481713537228 -0.37640696855598437809;-0.0048519040602298937545 -0.1914251205245831311 -0.81696076446159138218 -0.093214196378029273715 -0.053921940178918159603 -1.1066981879530148891 0.37477823830519391146 -0.1629665302640506408];

% Layer 2
b2 = [-0.046684595417773734616;1.5577413125476895495;8.8014153593037285361];
LW2_1 = [-0.037654492668326357274 -1.50643678891531927e-05 3.5314023638101432745 -0.00037039539414553362788 9.6525333530882218014 -0.017086841648566407359 -6.7240729759906420833e-05 -3.0323967971148335643 6.7379876175562918306 0.84235103482046547185 9.1735474015511370491e-06 -0.13477858605420039995 -6.4981112460361776422e-05 0.00083922591547590913962 -0.067984031852035595178 4.415957551247442936 -0.016683071493009619946 -0.00030983389916224739809 0.00045374900715793438323 -0.032371223582328974289;-0.0087574480869076105904 -0.0053501049929926963733 -5.882718516389988217 0.00041265956297268854835 13.734619694280961966 -0.0037713816614899854825 -0.00032381042850325024874 1.1885266419003102101 -3.8001668874261307352 19.253942969317609624 -3.8940226113832406864e-05 -9.2284137319116634757 0.0009057328745190379362 1.176008984631228927e-05 -0.056454811973658890201 -1.1493664649752388662 -0.0051055827730673237 0.00040580932528381347905 -0.0056047226298428310179 -0.01072973439519089682;-7.3254385859368733591 -2.1688081992520484853 -8.7939862696225663541 0.17942011947976452269 -2.2665652632437440772 -3.5491057911330425867 -0.21761631711683998569 -9.0848418131687154187 -0.22598021169154397514 5.4324895467071625532 0.21822129440468124306 -0.95729535856386849257 0.2180936866601345947 0.17512863031768347022 -0.39590023927181272612 -2.316989389634679597 -5.0408621058372817814 -0.13344714703659557586 -2.47589091005280304 -8.3079421362960825803];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;2.64729467290661];
y1_step1.xoffset = [-10;-10;0.0534936894945998];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
