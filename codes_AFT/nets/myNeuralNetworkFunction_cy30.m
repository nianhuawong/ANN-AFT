function [Y,Xf,Af] = myNeuralNetworkFunction_cy30(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Jul-2020 11:10:59.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1_gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3365013323308359;2.4323739129815012;-1.7695593286365301;-2.1959283594680046;-2.3973348076657972;1.6419816565640908;-1.5953430688582031;1.3905956192730631;2.2172770061824885;-1.2088557274008602;0.16048853707179342;1.3268665020675883;-1.2508034788706499;0.8487196125533728;-0.0068715843457807391;0.030993487095079146;0.49078153677248959;0.55112864073658929;-0.050370605658471686;-0.015357377883447383;-0.01361479718572392;-0.041933505774920728;0.048455296121424081;0.098581359440148147;-0.043441293698514544;-0.77903209278904495;0.70980121532116491;0.14898759792665955;-1.1777645306577358;-1.5219624497251145;0.8457292791998855;-0.56708913598946242;-1.3955538674592873;-1.0387529866762815;1.2135404249630048;-0.81288907388363008;-2.9945328537896283;-1.596463356672214;0.77835472103319048;-2.7234926985577639];
IW1_1 = [0.82833488578707892 1.2080450630513482 0.96947221036670805 0.48258998918355273 -0.39499981419548769 -0.61340090107675593 -0.39544505209810227 -0.96013744814095103;0.16945372121268501 0.64959693518229855 0.96089769142912629 0.18624653937488739 0.23101526029777497 1.1111376307297858 -0.92590276217926182 0.21687380432363348;-0.12264510305515988 -0.20485956298867428 -0.94125618905702979 -0.080555882478073673 0.033252207376952635 0.4223587624159007 0.0042037106327339289 -0.04111280545124351;-0.35579873912253474 -0.07445829748532605 0.28317587714220827 0.44757039164706397 0.51246899746448571 -0.63741947577683078 2.149430598770556 0.0069886202362132886;-0.025054555832157564 0.76189922550616096 -1.1776401041184503 0.055053577654335259 0.19673783053890556 -0.14555394505875047 1.2323740144045561 0.070943313574857544;0.14687991768854169 0.48666694677403444 -3.3099363254931058 -0.31940537494590454 0.54670607342521271 1.0709900665384586 -0.43894769779546366 -0.015963421967612131;0.10221890985733574 -0.024544808447715741 -0.16050396965251482 -0.17029168844798837 -0.27725136994253075 0.81873012694303271 -1.8807227415082686 0.0018489050360032315;-0.045999837392020723 -0.35656364647063837 -0.42497865185602118 -0.043553102532237188 0.069109317929620537 1.1532995018496619 -0.50984268887323181 -0.04228172299582935;-0.15871359522186637 -0.14940128562525504 -0.37706370041020637 0.27438712995714504 -0.13438032819347542 0.88891255948027403 -1.8515264013233395 0.49321017126580174;-0.15397203550201227 0.2706355342926981 -0.55427113641749659 0.31990409558754551 0.3630022959124713 1.323097145044956 0.45934794241154858 0.29195037869097834;-0.096069904045496438 0.23662382025813022 -1.7494681851754883 -0.1122809647005987 0.19399893247993349 3.2039303909677805 -1.289655627929736 -0.21693711057905513;-0.31696598469769344 -0.62372684346685936 -1.2389666213137034 -0.1587174133234931 -1.019678853995581 -2.119410916565232 1.7504057060163565 0.41064847192676063;-0.05637319713795929 -0.37678806640541934 -1.2896400201565146 -0.28988505059486463 0.25554087224983096 1.3479128026922691 1.0715868423487453 -0.2768361597625601;0.49000550758323064 1.020380604233093 -0.22194298164632698 -1.0201954014687709 -0.34390378433642543 -0.52954846210064654 -2.0944591836666318 -0.97063835932990639;0.053874910524750144 -4.7379785769653981 4.6459649309035482 0.054640301774341024 0.041654721141236022 4.3865568070221892 -4.4375754695384906 0.017626998629911891;0.6930768781512332 1.7859570552464785 0.99569523821401795 -0.11171874402925108 0.047448678795080849 0.2196510403804029 -0.98380456087408696 -0.34094680570288882;0.36441228858345032 2.1085907764497192 -1.5550848676519384 -0.86889527195194571 -0.40694747353194166 -1.715758734086184 -0.71028891198092525 -0.74756014071582311;0.38265465591280451 0.3731236945505656 0.16884978975925208 -0.92750743471137576 -0.47521586743684913 -1.5488569187819643 -1.0349327313248744 -0.70625308588415125;-0.5955015243766032 -1.005415607366005 -1.560699466087845 0.042936664301486183 0.024526578263358974 1.0712574052564345 -0.34064855295955693 0.22362480668641752;0.033455371963433816 1.6430649170512763 -1.6912450801892331 0.034225978817716031 -0.022334061431367753 6.5090407426825028 -6.4738785304991691 -0.0068858248696897183;-0.073572616227619805 0.12031313855158368 0.0063102351351666894 0.069439369134800907 0.14689648472153091 -1.0264886018129689 1.7163030505378603 -0.016894053828720102;-0.075082977497756748 -2.3055788468378662 0.88581923679944852 -0.010456444377831853 0.085544895485187719 0.28471147423955595 0.37893259427171744 -0.034612953205334598;0.0078238590541096602 0.33863688565664524 -0.34360409692882049 -0.074853287884990238 -0.076621632909098764 -1.0675292698193208 0.91378344139906964 -0.0015787793300876816;0.072519732192937669 1.8995227110362725 0.015526176360212432 0.026517927044494807 -0.048067274726690631 0.26222199540598085 -1.0960078481038371 0.026045823848745937;0.032005430643142818 5.0997322520602388 -5.0499090387824159 0.00084623394978183201 -0.051444262250798463 1.8302915605889947 -1.7372100882978907 -0.051118364914542136;-0.50532222003015692 -2.0463659736988276 1.1949572261094132 1.0874230886098908 0.32606275548902158 0.26657206033464026 2.338842978593517 1.0577468995125816;0.51227463979084586 -0.52806657754501329 1.2237870268582618 -1.164960412968058 -0.487163823367052 -0.61037729647951122 -2.3835406165165089 -0.85979251373742993;-0.032667729460059157 -2.2611663067360692 2.1137465761545853 -0.018778464470775805 0.039237875525820358 -1.1545915440070043 1.1333953790134204 0.014396516565138497;-0.15001035721435776 -1.8056208803068547 0.47158707001739003 -0.099493769427892703 0.063550423392213007 -0.084030588427191258 0.58280314717509651 -0.071019864583631714;-0.16669125530763992 -0.74467309410741811 -1.4354386584576342 -0.19394570448296544 0.11151728534946463 0.55375543872852095 0.32918088435403881 -0.17693821577172766;0.2423384200568888 0.52344970211606534 -0.025398789147976164 -0.52167975126610988 -0.25077052910357639 -1.5495101562916984 -0.34802200585667159 -0.62029467039577779;0.15592535085651854 0.84674580085971574 -0.89580865805952881 -0.37201029829270227 -0.43256867946309052 -2.045981228595446 0.7100812007349494 -0.08579126650373041;-0.33841854093051899 -1.2209131034896028 -0.63076516228528801 -0.36542145415950694 0.22620834836477588 2.3868751607479344 -2.7579416441458351 -0.62041850534274101;-0.29824181212990203 -1.993691508952721 2.2016518330365691 0.55420384930619038 0.47129975338145441 1.7942437476083557 -0.065101222670194914 0.015720516523120637;0.04652599313573226 -1.0409896239021859 1.4893260662005467 0.049380952059244525 -0.19219953806795359 -1.268073328656953 0.16405727333762607 0.12009748514701991;0.0073936874647209626 -1.057916062191526 1.372866630247404 -0.00068624018532920984 0.0011822348229536292 -1.0203680155477401 0.66187843459548623 0.015475680808728196;-0.22243538934848817 -2.2924918038714641 0.93092182407869539 -0.053349902115000979 0.10129689405349634 -0.41461420830396811 0.93237905417877065 0.0051468145795535531;0.35955689973988009 0.91710276855806894 0.82370026737305391 0.15048245591491799 -0.12893648939920155 -1.6186381903187665 0.11799448718000458 -0.23629489660508418;0.041664816073736802 0.72992147939720398 -0.11581237122877733 -0.010413931668899723 0.0040384227069781139 -1.4195201217557065 1.0225673439034619 -0.011153335971406371;0.22681965764929354 0.35328738977897223 0.61521788291600099 0.61146288140639993 0.05179972344648668 -1.2907062957775144 1.6470343409218675 1.0342860922724113];

% Layer 2
b2 = [0.7262345350699998;-0.22599256403600071];
LW2_1 = [-0.040557602356251936 -0.12609159275005807 -0.66918112083205628 0.29098027580761238 0.35331393068615746 -0.030465563858348661 -0.7591612229502136 -1.0580521934396592 -0.96008031294589014 0.19044950889782772 -0.095116865442653645 -0.023478548549971189 -0.033523220962620462 -0.2249533598773889 0.57906941834653802 -0.18644083143942233 0.060694480243861607 -0.25760402475660982 -0.22817589562942348 0.73320864237755612 1.1222804756614848 -0.0036901774347008445 3.5180827978974829 0.10774539080649084 0.47986995481099348 -0.12124943022266454 0.16190985515138759 0.86592523539971267 0.13743899052227357 -0.11984491816254306 0.20728875486203799 -0.17212636171881393 0.026924496045058959 0.076433312562385544 0.27504270350442256 0.073567158892335838 0.042619264227002747 0.12501815013489617 0.66288873196420695 0.057670374588636955;0.022140871518089428 -0.026062538160109793 0.80878182961964484 0.20028743010330863 0.56492358878697613 0.023116786641117604 -0.61577168415856454 0.21544253137258379 -0.291133159844365 0.062665470023215708 0.07022086904634503 -0.0099478280378228895 0.028776229344055354 0.11150416820297232 0.6336948203990308 0.105015330563535 0.30479792924311716 -0.44456957312777734 0.11538777318286869 -0.1705691962398625 0.83261103846291984 -0.33381636536384041 3.0900274732597262 -0.24554364211445878 -1.5562694450525758 0.18751549139829721 0.18273577894631229 -3.5322076438206556 -0.59592145543788455 0.16964086297990363 0.0335365648337001 -0.16481622821208519 0.010787860421215418 0.085472249805701547 -0.21251406273110865 -1.2112725766962942 -1.0431397275991225 -0.065023807402467229 -0.53371000152899761 0.038726857354923601];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = [0.1;0.1];
y1_step1_xoffset = [-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
