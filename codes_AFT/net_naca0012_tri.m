function [Y,Xf,Af] = net_naca0012_tri(X,~,~)
%NET_NACA0012_TRI neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Aug-2020 16:21:51.
% 
% [Y] = net_naca0012_tri(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 4 5 8];
x1_step2.xoffset = [-2.12536489745503;-0.544114911973483;-2.27223783018806;-2.01913439235065];
x1_step2.gain = [0.547198330660698;0.508916130469259;0.449921353851259;0.480678119723576];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.739623882043713099;-2.0809061053639137384;4.6037302353789790743;2.6355000061542148693;-0.70488977355556825533;-1.8067749252001450433;-2.2599023449647361872;-4.3213295970065912499;-2.7980607425604118177;2.3476408522896710096;-1.8099047495061617585;0.35524900627181471569;1.0048738506957468619;1.995662248546938855;1.6919699763306836893;-0.48285309605511955722;0.42249595905264047957;0.13232841796206218365;-1.0473004293374699181;-2.0503035547768098112;-1.1128839320047367867;0.58107457500656967131;1.6554962671831088272;0.51198162902787935913;-0.13230525442799029312;0.095982149346935968781;0.12201971093014293834;0.17674886364099920422;-0.8413350646706154734;0.48171140326034600498;-0.86474103176249339509;-2.2333708782873165077;1.2501048940386614294;2.6054038236565055797;-2.4418227447768425797;-1.2483023119851697214;-1.7275392593832818999;2.7623775675942572327;-7.9229639361136001696;2.8079665931971082848];
IW1_1 = [5.2216274418052348594 0.75288168056838966624 0.059288012415971542979 -0.17210397033900279307;-0.95127259774539885129 -2.4908389713696297285 2.6713780797336799111 2.2707865418233383892;-5.588313300971303299 5.4915365995075751115 -0.14315137271161051946 -3.4484031934737933156;-1.1748621987319298743 1.0693362256461700355 -1.3510826997818916606 0.64521332206982273672;0.15992048829560076562 0.27102251773054270023 1.1383991377730282579 -0.18354286250832174687;5.5104508067088477929 0.72798133857430946669 0.072924471546242111697 -0.71289802805052515655;1.1939670889372457907 -1.1952761631289436917 0.065469411681556344274 -0.64583664258791384505;5.0389935601869506598 -5.2820140439600891114 0.26089459726791308647 3.1823223318069113752;0.056036548656145837577 0.33157761819779446588 2.4544428996403770959 0.93882538570836215897;-2.2927914393355735001 0.58374282899672702563 2.5016430682071706393 -0.015937627981473183325;-0.40572331363934921455 0.068953403988019829063 1.3605856545437093885 -0.87583080227313436783;2.1808626605811398669 0.65545807949546919247 1.9116933242026346029 0.41798737052795337243;-0.028491185930098368584 0.0040026882217174559325 -2.4477323251255591607 0.20020078723349488126;-0.39137017257903838896 1.8315385262072458872 0.26503015205924679298 0.91113575853805583993;1.2364167380140478336 4.3154780490249082803 0.12174467181310538733 -1.4636625365781841257;4.6477367492470698096 1.0282799828577282586 0.49707842043724731473 -0.14654683683335750777;2.2202852540166340134 0.6601213875779102791 2.2569572510884201577 0.52315637024385808207;-0.16613802187399348553 -0.49186193208574491287 -0.20679297057934159509 1.0187133591076396044;2.470156174069507049 0.14128438883320978969 4.1331937543843446647 -0.78615842488101583818;2.1442959678411397384 -0.76512147869683344581 -2.0272822953379656674 -0.038802736696111485293;2.8705174666613664236 0.15438754790035949527 4.5104486353758961314 -1.144732235997542924;-0.13403312919128171354 -2.1441522688565015642 -0.027252998673488695869 -5.2788827343526749658;-5.216500263761642664 -0.9352512282620647488 -0.065947968881575946831 -0.25770625607126207424;2.0241697547088954856 0.46647407675644680936 -0.88699938791899868296 0.15978485262739203221;0.14124098281062674731 1.462386145513460578 -0.0237215114704289326 13.182333055632511787;5.5790197104411438644 -11.547629935592796713 0.11845084051055440599 -0.45931997027493598473;0.011638462973539962647 -0.15655573296508931702 1.0071204813590206584 0.53227890928670928972;-0.1071633538887390158 -0.62991540245568367062 -0.53583641101158496767 0.95854739035275560166;-2.7779298401326353307 0.0017342016842170635341 0.17922911148938225345 0.1761730608552856403;-8.9203133800798504183 2.4247653475091945907 -0.027471739952485932368 -0.83770651419832242723;-3.1331595972153083451 0.39909759070830130856 0.13599680480530149107 0.79474657087016964407;0.2462668458837176666 0.35666435996196876879 -2.3204483044231087874 1.3946199187001628861;0.6218364583626417863 0.32212672014659965436 -2.5670155122184250551 0.6318692773777285776;-0.24956508664220317106 2.4388794485299429837 0.33637795524238012224 1.5062973292590740026;-0.85062073267374560537 -5.5906993893193996925 -0.16791218806172711342 0.7157949048196274866;-2.011364355495514733 0.087900616397013048298 0.084963233338240642945 -0.56441871187596515114;-2.5095077670917795842 0.3152407123172796255 0.028168849774368585892 -0.57149261242915738723;0.79166746481290839466 6.1962671168723897352 0.14250012186589894325 -0.65381662374958582351;-0.20437024330806050076 -8.9519062679654428649 6.2051626845865950344 2.074741053154071313;1.1883370642616781776 0.25716778110315380301 -2.4597453253179817345 1.1813459210644920994];

% Layer 2
b2 = [-0.71723633477510317924;1.230941276473905166;1.2309412764748919322];
LW2_1 = [6.2921993084915213146 -0.23082515566066752477 1.0986935165288540528 -0.28866088608753481815 3.7793564077579224758 -2.8036296549787733667 3.2575740884183330692 1.2208661340042417098 -0.41393373317746467999 2.339558910216917198 -5.9815521204512220876 -2.2112404719805454079 1.2511242848156343133 7.3923079018796480355 0.57887093400388323072 0.33702140107272859915 1.6041282437550261619 -2.8664290957047877662 1.1768819559878647141 2.423665439354191431 -0.89892794969781486536 -0.0069860714578621309692 3.533675326625108859 -1.5436388397462093014 -0.0072530276248717684764 -0.027097720706084571507 -0.96593424494397106539 3.6364067633634378218 -1.1666844544676777673 -0.095288209020490233225 0.32382615308278117627 0.28244410202179431879 -0.99629750132482530756 -3.9864586586126171674 3.5005593969745820715 -1.0177364056771138756 0.81902847236726894486 2.9096942005903740913 -0.29744702353585583676 -2.5869028957099011734;-1.5571527885251705836 -0.054077124878647443718 1.6856666052132027733 -2.5353275589232824316 -7.0032529830167247198 0.78115609468909930069 -5.7705620650681241912 1.7267210673400932297 2.9141484644132065185 1.9829171956066027338 6.1820179478400749673 1.9267655310717146655 -3.8587515841490471757 -0.64773840653257086508 0.4209442095121748717 -0.3529684502814201541 -1.6107784106540206093 -3.7830938505583837639 -1.5816675411829455022 2.3868039704850887439 1.1714087754827626764 -0.32206114833214100068 -0.92427162592899247961 0.95520443552502021234 -0.14986682682698812541 -0.023343985711715017906 2.6970769005860812939 1.3507271623827838969 2.1017370715742140774 0.078948648709295604631 -0.772330630981314048 0.80723791871153227628 1.8200776131293738835 -0.10456309073850809932 1.8789041673864594895 -2.5122593050388943858 2.0415817369534665637 1.3073259698889281299 -0.054364637300317875113 2.7691864520930771221;-1.5571527885249791812 -0.054077124878646097572 1.6856666052130131472 -2.5353275589229422593 -7.0032529830158667394 0.78115609468902402757 -5.7705620650674935845 1.7267210673399389087 2.9141484644134623139 1.9829171956060323012 6.1820179478397427886 1.9267655310720748219 -3.8587515841487634027 -0.64773840653282277469 0.42094420951219102545 -0.35296845028145273915 -1.6107784106543066027 -3.7830938505589495335 -1.5816675411833951426 2.3868039704843968529 1.17140877548312905 -0.3220611483321480506 -0.92427162592884370973 0.95520443552506661966 -0.14986682682698720948 -0.02334398571171041048 2.6970769005860533163 1.3507271623834169461 2.1017370715747389909 0.07894864870930401457 -0.77233063098162146876 0.80723791871164318756 1.8200776131293330273 -0.10456309073828039258 1.8789041673866329063 -2.5122593050398069892 2.0415817369542441639 1.307325969889082895 -0.054364637300303816914 2.7691864520926974258];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.994189532150814;1.12173777583708;1.12173777583708];
y1_step1.xoffset = [-0.526262919467617;0.274479210544353;0.274479210544352];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
