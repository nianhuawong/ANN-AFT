function [Y,Xf,Af] = net_airfoil_quadBC(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 23-Jul-2020 08:15:29.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7453361554164468217;-1.0123955127490651407;1.8532600416616773487;-3.3837621139297091588;-1.8883737357969510029;-0.0012747967888760100043;1.6857485563498706416;-0.90928242245985468895;-1.1163997454601626291;-1.7202025993336393928;2.0300367323096577543;-0.082819314739006735793;-1.4394955903793071883;0.94975752048387873661;-0.019883413353190111661;1.543584179529190914;1.0733786289190252461;0.0056126318049549393796;-0.73556440871459638497;0.010046078608664809478;-0.47705654924010448825;-1.2559795591223470446;0.0008501125539037952079;1.778887411141079733;0.0012991528163049351381;0.83622062460915647097;0.75595863577544319956;-0.76517818202017529039;0.89423759399358027089;-0.66890979784573711964;0.71271696385726535095;-0.97017599502579798809;-1.8530206791178280845;-0.63364244701293204187;-0.93830360985706573462;1.5015812780944346461;1.5066691700572814039;-1.8584985918476224498;1.9495813403287245436;-0.15361741864899908228];
IW1_1 = [0.039859537271527842317 0.51598710427715532845 -2.0009706183449162964 -0.096601066336352167663 -0.29232740021018333021 -5.0602725004645696671 2.4537950266772874386 0.2626077906403726514;-0.025586260891333208189 0.42076976744966404498 1.1615387966957224641 0.036766350880541275037 0.14805132022143391302 1.0084989726735034132 -1.3640863368121345367 0.019430346134109481582;0.25702925859165814959 3.8422863129307245345 -6.0188916694377079253 -0.10066650990153709622 -0.086892083079632684295 1.6374982582791450803 -0.93043897619679083455 -0.053046693179541790086;3.6766460591331378005 7.1362459868409358066 -1.4839930919678818722 -1.0384753734891798427 -0.43609482417633005369 -2.4531809044589207858 -7.4448879772980873781 -2.3381339774567511114;-0.28342302893204501801 -4.629957844472867734 6.8278902881055039131 0.065587755567244054866 0.053691100226324263434 -4.5551892076699633805 3.9614358264804407916 0.024452900515421305966;-0.031359056462704988644 0.68450482712643045957 -0.65044458629109225267 0.0033719298592833945108 0.030214719079721258366 -3.8079355427882983776 3.7488348775686946013 0.013989919772242452242;-0.039908295755491519918 -1.6516764547766968896 1.4526289929237645726 -0.022342878483975880249 0.083387005539856770553 0.17178684863154877749 2.3497202617352499487 -0.16101696323324926619;-0.8678785884978423848 -2.5734514718477727868 1.9294877483771846194 1.1503620394268989635 0.7586843508372649314 3.7676885244558384613 3.5742167445918480162 0.54718700651595053586;-0.0087226453291500121584 6.1071171378549875541 -6.2209030295379177389 0.1071484022692776733 0.016078462020984646275 -0.55328676295593526291 0.2764601627898320424 0.28751561413862863903;1.5722410745640726937 8.1723355118143405917 -0.99843088100324628442 -0.62837084842425372511 -0.26795472361302979936 -2.5223349216389947536 -5.6119849729297595076 -1.038937846302645962;0.044342287671022502515 -3.6304622416114908923 -8.6840499729457256706 -0.44939933460902831142 -0.47910860101040425585 -8.3078342232917599119 3.5481664548210298804 -0.031125548144259908984;0.13959304743274850158 4.1077053327258479243 -0.080744790162025126268 0.058141315633937748486 0.3227245439576614805 -0.43633427489582865544 -0.63321848377901990279 -0.0084336361749111857927;0.17882872917383679789 3.5679589947132885897 -1.0455938949978316188 0.26912764506004671627 0.34391178155332358113 2.2690894547728790442 -0.34952480134311908477 0.095360879204333601211;5.8472907205787727491 6.9088014899060254947 -4.8250404345457269528 -3.7565732273601408764 -8.4636143192448916039 -16.625385597599418475 -15.406242172179220873 -8.3842804802400827668;0.034591714394956125933 -5.0662138864976817842 4.8116136405198499659 0.22127612708161722987 -0.026905993097059970748 -1.2727440800906757445 1.8534700244039843398 -0.55614688831726799556;0.86844200215228906092 3.3908515821538753876 -10.867339157237728031 -1.4136209519041160743 -1.1640196856149458426 -10.313174954646692427 -3.3613817195534085869 0.3051401481837169305;0.1380696225605939631 1.5183659240085485287 4.6074688618962165165 0.34592034758905532144 0.52453561698286943482 5.3103438357568020223 0.37925768116485630843 -0.31199617089093562017;-0.044310436706426988007 6.3083198640064406248 -7.1720958541843380374 0.90652537281108203082 0.039748078399240605041 0.62603855009611630855 -1.6792215296252881451 1.0193228102167559701;-0.0028221735134008373372 3.1644417403883755568 -3.2249617081041290767 0.054884806408094323482 -0.009612865252717362613 -0.2700645080141061416 -0.30640279663011854572 0.18721639115061286529;-0.041995656309803633399 5.8625739389275004498 -7.4355801747110685795 1.6128293725947746573 0.036678965598685865646 0.88872485674391388244 -1.2729664560650952865 0.35280484828927094476;1.7057324325317591018 2.1417514462926865448 -0.25132677454406315842 -0.95936401761285028389 -3.1234560012896426251 -7.6971569045859258296 -6.7542253197414066079 -2.6528038794232946529;-0.82560850911043925926 -6.1968657307639345433 2.0373726827644995652 0.40696770450023389554 0.89913102960670987507 3.4716998551191986522 6.3219911423877652723 0.69517817867971354318;-0.047173918560016313284 6.6208299105525263428 -7.6252497051256948879 1.0518150242108661452 0.047344411391027164948 1.0088039371480848061 -3.5183149425440274349 2.4675714954692375969;1.1270370094345971701 10.392652239397564884 1.2645776017025722737 -0.34643400885204306272 0.21506013851573574369 -0.79497574965714090656 -5.908767466185422812 -0.85726635967174269481;-0.03908402905569195035 5.8388797132467420425 -6.2367409546599903436 0.43722248902616206445 0.022919595960808607227 2.4889938646193403571 -3.3463191339786297895 0.83764851157336173149;1.0045768186824812762 2.0233371322404933856 -1.1659113863826517932 -1.3061991620560984284 -0.9010183694062556814 -3.2904211302078625323 -3.6067271861662550947 -0.69721743489799659077;0.026747697519948258893 1.1114075085283092736 -1.5825648002782373158 0.010311342291096120549 -0.04380060530425987364 -1.3929051573338067094 1.7485106826556280346 -0.011845063522934394865;0.031564903910065285342 0.73687216465596305781 -1.2982843787050215578 0.0053122422003051986486 -0.044122159043137584855 -0.78007567768101959693 1.1359013817501963928 -0.021697477745349358358;-0.010037798044854665674 -2.2251595057072521833 1.8117790221200051892 -0.012362391908020376255 -0.054837476958579392528 0.44706939626582153924 -0.60801120882416825886 -0.019258145863531538761;-0.060032960243906106912 2.0597068886297966728 -5.1960945952066790454 -0.46976065430778335408 -0.23850369031593202096 -5.4275993018339363516 -4.4397170181133391864 -0.49563432161795062392;-0.0089630699091086327157 2.6504357599155352609 -2.6923762303846148214 0.049838785230578094843 -0.00012815945447964123506 -1.0148667176757455444 0.95463985673900864093 0.11507758918188147612;0.020177138423486933733 -4.269705200956900093 -3.1176748394568751799 -0.28900774892117764292 -0.42015299320235893754 -3.5144207476518740663 4.1773330018768657368 -0.10133781254539211969;-0.03206965257150255072 2.9234744832012404814 -1.8794378849383099883 -0.11417539344293999026 0.25688966673391572249 0.048122479210297192109 1.3149722026083905391 0.099859185059667940343;0.0092817252391572142162 -2.693773067828520773 2.7074920503817767603 -0.042590482972219997904 0.014959213797090250425 0.33343693710785099471 0.3118742724140329825 -0.17638351556214287852;0.0021677824613893417055 5.1125432282642444548 -5.2035879376807940844 0.079380119208924557195 0.029541775209559542614 0.89250537064985713265 -1.115857989308749465 0.24067781299293436459;-0.10254747991930208972 -2.7781496264368423788 3.1424891201663451845 -0.0034281973617321971626 -0.038811739189789744298 -6.2852599301403442311 6.20089499832626867 0.001412539983888533128;-0.077291664614203406392 -1.8458495033313884193 2.1291766399672495957 -0.0034192330520306114111 -0.028087647120728084088 -4.4689380355346299822 4.3708311541518858334 0.017187103401483064258;-0.27037342947801995541 -4.182310774523109842 6.3580928497877442496 0.081462949794658970348 0.068289684490898658331 -3.2689476948127134115 2.6278875491553614907 0.038487026539305330131;0.15926706661868816894 -2.478941927783063548 1.4056946791976367983 0.16561245510368527434 -0.32231891232277187775 -1.3556142421891070882 -0.22380037291364887619 -0.33453251462134031557;-0.2738466425290286832 -2.4207967098477443102 0.63937724732002432226 -0.24517185206337693826 -0.10415928717467777542 -0.54730827636222167953 -5.6893583141138837078 -0.93678709752235289621];

% Layer 2
b2 = [-1.3267822928718338016;-2.6490669231600016964;6.6587939738118890887];
LW2_1 = [-0.012184837867610267062 0.024331861765799312619 0.20990730292991888195 -0.00031035783882632424777 -0.16809072616917766774 -1.3512400758049796234 -0.013913272236647539204 -0.022198775566137477627 2.915487533726331737 0.0014964026260323689318 5.6100423660223583443e-05 0.0031903691465851552293 -0.0050194592381503887191 0.00026247426438941683481 6.3468277684442764297 0.0014819472717097115395 -0.0012358615184745668728 9.0713249157871551631 -0.81124970668803308982 -5.0942939214963542938 0.0014798452060822114406 -0.0010730692041528841138 -2.7632800468899310076 0.00097288357722429897375 3.041974678677009436 -0.022218256199583456129 -1.684110254976541432 -1.5729722467775408834 -0.46517466393229878197 0.0056892847957171104392 5.3230434212085286916 -0.00076879477222201501006 -0.10241841007590506141 0.41191898612726313145 -2.1546300317948454683 0.6243655419594121847 -1.6605335851321911811 0.38896858152237423489 -0.059496449819979292661 -0.0099152362563288687358;0.0051030246981212529223 -0.023400162930813716428 -0.78795232430737394136 -0.0003998650752188733469 1.0414790625816279235 -0.8090810002145752966 0.022371867621556747185 -0.0007755414985459839353 1.6199259531989347316 0.00094660310761569767431 -0.00062452411626953902631 0.0032916968698918792208 -0.0033474112317947971214 0.00010473293703076228098 -0.92581647293012514499 0.0015205369073807459106 -0.0021950559964865703523 -1.0638894119289912243 -1.7243213206365199941 0.6265906909095639854 -0.00068301701469836032313 0.0010523811694915495042 0.42161479235366822182 8.4699979892993999928e-05 -0.63312581124529154764 0.00060536805215169085196 0.06959272332744559364 0.041004046926549610197 -0.14600393040945708334 0.0065920173355270466134 2.3064835381367116973 0.0020179505629957005322 -0.029523230974147628147 1.4591838296242716222 -1.030820063345295523 -1.7895431727930020127 3.5195160667883138572 -1.8057763091690881563 -0.014883902429861841504 -0.0095794744473052927808;0.34887235798418625432 -1.620652975186551048 0.76430811007804311252 -0.075999071172861212831 0.030491980781897916331 0.12184704256643430487 0.94943718972332158401 1.3498231860812868188 -1.0903070843352893338 0.17338772153137335663 -0.16370254704237460763 0.3249670918169138556 -0.24031761826153671957 -0.16455802889875545403 4.6623934618696960541 -0.14122025377764002574 -0.19609981610230495241 2.9498595949298409558 3.6070604488958339928 -2.4843282123800038974 0.18497371897053072054 0.25518799332271885349 -1.0127176241353821329 -0.13701986475230826246 3.0094965666182313946 1.2463027971222602197 -4.7768734844921958427 1.7224691942607508466 -5.4128763632362844049 0.27981398212142083448 0.9281708110495910935 0.32961873534542857067 -1.3285874318484420797 -0.054233505781047734728 -0.093391761455039537521 -2.2217212273014643742 2.5762453426918643373 0.7223774061958785353 -0.85197898829726081971 -0.1444018929893695069];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;1.634651352754];
y1_step1.xoffset = [-10;-10;0.000259515743353245];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
