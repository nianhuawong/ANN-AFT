function [Y,Xf,Af] = net_cylinder_quad3(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 16-Jul-2020 19:24:36.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx5 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.92887213566132764697;0.0051297491631177331503;0.71789803659872541974;-0.71334576524797033148;-0.99921200289680545126;1.3991132305228555222;-0.024892528116575329822;1.2555588005155196019;2.0973442630395773278;-0.54024705116536297922;0.50708213501427901182;0.19245604224300222329;-0.52399477023785678842;-0.043998789408408810198;5.941328242323030473;0.59896686976348056941;-0.0081169781163377089511;-1.851251265695875281;-0.0048638795964761451576;5.8820820439350161024;0.96074989388775688948;0.10508886097713535102;-0.023095759434248602782;0.0053806916645595731161;1.2061694173391728224;-4.262971974470783465;0.26218801563016896905;0.55613277096333013638;-0.78907006414094793545;0.11723277893940142746;-3.9190853708197481708;5.8797961555984601389;1.0796482244667566786;1.1046535135120854054;1.0674459703322680681;0.02217667046099086603;13.144654526456443833;-1.2752477952292138319;0.031423064209273536551;-0.65932882511404411474];
IW1_1 = [0.16700379236488560597 2.8996320341338579496 -3.1714041475284342475 -0.17328457296463845028 -0.097522577908092530907 1.7314738782429042185 -2.9179454115955461013 -0.20247324643804337496;0.41393193466090455468 -5.1821990571886091814 -34.747216139702175042 39.529382935202292515 -3.4173985641660520329 -36.35884822840866093 28.560379591430688606 11.330713535702090056;-0.29367275763752043183 4.0881008700802548006 -6.0316687066689960162 0.077018099572461626301 -0.28597829777838990051 -3.7593344355480704522 0.79621374540687062105 -0.12768838056039011342;0.42041661323216350521 1.2238048361825120125 -1.6555124581998101885 -0.2070454115542797735 -0.31488467806205233668 -1.2977911462594475811 0.54561670196798583987 0.049901641445457896318;-0.53262206983090809587 -8.2052260485098269527 8.4999825943156093189 0.30110765948972673112 -0.22530945083479320123 -4.9358301296471127628 4.6841610835070346397 0.47232143474624310731;0.42019572188877041263 5.1907728330695297458 -7.7771622192290887909 -0.63269554552513873613 0.13356007004354647494 3.419419663450336877 -4.9883777598674239329 -0.42101359851028291592;-40.522107123714967258 45.751552130783281314 -4.1082441628865860039 -1.1166032989502083783 20.225667060559295862 22.495230924383388782 -38.693693391357506073 -4.0421299104583381379;-0.57431788754711765588 -6.8280525954692290469 7.0668432153357549907 0.39226212156967538158 1.1817524850915168688 11.392860118644847489 -11.942908820705888218 -0.58896885740324289582;-0.55519881514904190212 -7.2449423603802731719 -1.9639269869489186515 0.13782918910625810427 0.32714546954668444201 -10.478713810551942842 9.8254577392497708388 0.81721315081134549008;-0.20963734760157071157 -1.8680057688314892772 2.4559477922370098746 0.129204484143845999 0.13928470351042682163 -0.034361126767409481964 0.53750421305620810219 0.0034031122183920663876;0.04501168443956572035 -0.53222805452600829845 -0.15622721293195274139 -0.065343250939492447671 -0.023200387088829928922 -0.87376543896349068152 0.81791678120005195662 0.067898868154887534465;-0.1014637271070808755 -26.679424597926924889 25.537064934882174327 1.1788922497724658722 1.4451164273039305286 6.3635894333291336267 -6.4300789763468522153 -1.4053446883142699519;-0.20808641558235926872 -1.6268615742343794928 2.1027270956714576577 0.12887672442023809238 0.13288572361747361117 0.069958563733066178592 0.38877158106970932661 -0.0015021041565096385651;1.3246071771098784087 -10.565247588768173159 0.76470098704236288967 8.3648288716933816289 1.2921865966811785231 13.841564729998776073 15.544413305253961255 -30.725779570875765501;0.088392122505426842793 15.491815704598838721 -3.105383875547514716 -0.29365109128068034305 -0.11130224700608767896 -10.989574496154446592 2.6657076263767707225 0.12600822880900230949;-0.23880607350522567445 -2.0629250968559591506 -4.2127676406508935969 1.4913362352581469583 -0.7452699023531169642 -9.9521571461643585366 12.367801747290146253 1.6539111363866294546;-1.0244027710573806456 -15.903334730811833353 17.222141618685174791 -0.35023343747152124728 0.063265875398053714185 9.8028638772915606125 10.926182890748473042 -20.78687300946922889;1.0692902541432396379 16.296141514274342654 -17.663259241634815311 -0.27920398971718163317 -0.78342241809632018334 -9.318714030238908208 0.44978013315664910898 0.56374230102083144889;2.0636343356039392738 -7.0782047174233024833 0.72039492847822206301 4.2642313212570517322 -1.6288981212847466473 -17.952486096030842333 16.914763954814663549 2.7684402074241405423;0.13005926073367871099 14.999707959140398117 -2.8747940694473008705 -0.28378054894805376795 -0.034443173414005462396 -9.1658898553609624571 1.0845511671158887257 -0.025537729636660774779;0.16351741699773389427 4.7021864974657630043 0.85652429091938930839 -0.27722798738018505915 0.024749111762654981556 5.0371711664378073792 0.8413239532974026158 0.22982466220923977729;-0.47861696998635888667 -2.4273254375651376336 -0.47428978010587469205 0.046811946844489756014 -0.17262729052556391451 -9.6196894522326488186 10.37854338212739691 0.54394107720350481916;0.032748592559446933203 1.1387020559160467847 -0.088997974041922542354 0.039126314225912846301 -0.09892786837652541021 0.5130990009060446555 -0.46338556873449909812 0.005555994228325827726;-0.92979235399747772739 -12.705516577185873572 14.672404983947616941 -1.111574381309037296 -0.46990810076475858503 7.5469641648487577612 3.5467368569578443527 -10.601991163654920669;0.2374421498276333975 4.5682363815242448268 1.1322430320234011525 -0.065032149348149992374 -0.045789298452677915097 3.0689110949169884357 3.338354365920578104 0.35387658390926662877;1.9765271893688565186 0.68962796121615888012 -13.731031164612790718 -2.4074398422162821554 1.6938647984434955784 0.65167265301535981514 15.544026140288671911 2.1528507183393119639;-0.059897410772636890119 -0.93326734900123764493 0.18171047746215826524 -0.014196095395964744221 0.038522722385626102792 -0.35647401611638096508 0.34293823389842237326 -0.025025628184727366499;-0.031280102321838552937 0.59960102039260210205 -0.51198528888180305785 0.032532334014261359012 -0.079674251895741468599 1.0202361500160181951 -1.4857809960828340934 -0.18091135953968764949;0.222636844702499892 -4.2924641184288896412 6.4720077719756474721 -0.072004826731391663452 0.38647560696633243005 4.5063318896727055929 -1.3902542421526353777 0.059882649280844232886;-0.040062251180217688107 -0.89525221117372499879 0.11634886057952284477 -0.030560293495027895938 0.063759708130523853886 -0.36179978236339532804 0.33349601007265705643 -0.019534923008125221894;0.28202443336005383889 5.3673607003660306347 -6.1878188030464968961 -0.18829384362615431137 -0.67166424776857147627 2.670996844116686475 -4.3982513147809676468 -0.83369180408638621227;0.15294630309122095313 14.658796947227646257 -2.641463221839936093 -0.27822861257220837805 0.031613007690069826194 -7.5785161299187810968 -0.34938806251329757036 -0.17452199032052426175;0.00069824572729232348665 1.0391209519819224472 0.1261222033127981923 0.060855359329816637037 0.053678663760111572367 1.1831703458597777612 -1.1261652089856226677 -0.062602280917863475929;-0.50836742567153314631 -8.9403121746164515571 9.1375685824417622882 0.32394561697434259839 -0.25971747138611017691 -6.0617925736305968698 5.6742139453326876364 0.59056989740661602895;0.18436821102232642255 4.5488340293815330284 1.0008043728974558295 -0.15771683730117772027 -0.019046207785213497415 4.025207408955822963 2.0373191896302369486 0.28845177555768841682;2.8337136532665816446 38.052512393405379498 -36.323684218523737854 -4.4672797743251777547 47.862928417196037856 -31.99076601337239012 -15.146137183244698932 -0.6524651113031215699;-0.59483308724854300209 -11.7661067890946196 19.109046182021074856 0.48907280475601477843 -3.677770267453748243 -20.035187543208333949 45.228375881964815619 3.1998492392862010192;-0.51638350020909484783 -6.8443421871439973359 6.8891252586210729447 0.47892743695880396482 1.1564418512626910562 10.721157107909231598 -11.355268388446340566 -0.5194685032024157767;4.4021841706588915599 -4.3272868711922392038 2.1300930975484217988 -2.1291395952499718724 -13.64308082167763736 18.757142503982368709 -4.2246162791191919084 -0.83954029140937236342;0.38041213781960020457 -3.8823132600544312254 5.609700482946360367 -0.092886985121639578655 0.18819421729458568615 2.979338042581985313 -0.13036982531873775315 0.19293310750235584394];

% Layer 2
b2 = [0.3117980417026589568;0.37218153439625756285;0.3575530174906350056;0.18205976014584637768;2.6681857454447581723];
LW2_1 = [-0.033264693359938660167 0.0095271083098581264142 0.41564086955092893749 0.036096505403312585669 0.071869414349354454608 0.013234564219849519542 -0.014812141706775238184 -0.071287108914212291011 0.004785933833832774556 0.6875075088709787785 -1.8547320615850353409 0.011522880635815134151 -0.79803246761111590324 -0.018536132549471871084 -0.50551292993663565767 -0.0024231360320123782048 0.044596284836626455539 0.0058738325283123173429 -0.040129384504049153692 1.1562658459428092339 -0.26904430026297920797 0.023417671920684546977 2.5883010229853042894 -0.042750800810365710558 -0.25640246682784006982 0.0014285968554668393698 -5.0080786733033910707 0.025897115766413451865 0.23692606517298692159 8.6192042132881070415 0.031742380860852549562 -0.65134251204865378782 1.0779447568709963345 0.062066862104791502286 0.52777332914256991359 -0.00080143384492928999505 -0.0051509539604828510212 -0.076596027277105863118 -0.0016047366499216766424 0.17126557981214901583;-0.057568659953273045027 0.019577435057606742963 1.6044464362443686678 0.094729695123470444851 0.14781400340428491047 0.026595049070729112617 -0.0039953335832740265177 -0.059670890607203146139 0.006600308607399910793 1.3417129241382319549 -2.2468818211181003086 0.0023808158618140954493 -1.567078401329758508 -0.0052298725927368986191 -0.67246034191722159346 -0.0082131628174179661939 -0.0028286311515731145903 0.0018904246143721604913 -0.038887896125864185315 1.4530945712373626311 -0.085889210519799266685 0.031879916551988518592 3.7625944095989818372 0.0055517394237107400845 -0.095733135059952262358 0.000869961391886961183 -7.1279189776244393784 -0.030485714055918884668 0.81791153715709685734 12.52052010668920623 0.013172789061141637612 -0.77948534136814884299 1.3422789557517871284 0.12444628626185366693 0.18592887722289760943 0.0042930907295750794436 -0.004439147913447166055 -0.064587616723809429531 0.010432418755004559466 0.77641035243541711708;-0.2048602449854436125 0.0047070750585498782881 2.2488485340049932937 -0.21606269092070054527 -0.1871977192363321052 -0.01191561345648620325 0.0063213199939344717759 -0.017087639422195793903 0.0020673164614968082484 -1.8923588309759684645 0.2944313294146997384 0.015056431634371572961 3.0896200781005802583 0.008850915718213571079 0.0051583741944088712383 -0.0073823064958966821622 -0.032849276445913108691 0.006743618254965746267 0.0081430683572439564732 0.022595771359832129976 -0.12606397246664671763 0.015571150825309501911 0.9891912420819074514 0.027854634097769725987 -0.15274942671544047834 0.00022275981286939272727 -2.2027596993757811994 -0.42220797259179215777 1.1053078261440962837 3.4654569367444785222 -0.10281283531295731803 -0.027924261719950115718 0.098815365846059682875 -0.17019805438742000026 0.28535923833680948425 0.014235173614437974729 -0.0081202536055160704637 -0.019462336244099445737 0.037232356928326444667 1.1363340362687786023;-0.20561372608260281014 -0.00076187581320115427535 0.91553395392384284701 -0.19201035490859741373 -0.19493563968839514033 0.0012858762750851372107 0.0066459714338782636955 -0.011844114406147519467 -0.0015426822736266713153 -1.6042808183405374844 1.1661310870015975105 0.0062079834124983751184 2.7556519566977066837 0.027857024352758854441 0.66030763237818590472 0.00088734328557325164218 -0.093147133598782280717 0.0032918168742760737719 0.0041565392584024018 -1.4060928020990584031 0.73410427512714770959 -0.011729637840720173389 -1.199872133064122659 0.092886530428840180518 0.70752347855722119707 0.00018391493805073474651 1.0345760706915176907 -0.50625874569098672229 0.36155644184635837846 -3.1823129807859156237 -0.12705483210754126011 0.74850751173038632125 -0.33143153742295949904 -0.16760200129888674914 -1.4483740629811034939 0.0044563702734637996444 0.0034055818191315581286 -0.0092576717058365978058 0.019987547273137666604 0.56802272126206787561;0.32303313683926693223 0.00017226226942802832088 1.0880263601260682371 -0.52704982520944787527 1.1753085152405748914 0.0017879548582301991663 0.0010362075814205084535 -0.76346776387651427154 -0.248810008553272205 -3.7880440281922056478 -0.46201043379582951154 -0.058958952935939258622 3.988916840822623211 -0.0036778909284901615574 -2.8539356874213983595 -0.12177702834889449213 -0.033463587265298626316 0.097763161639484202903 0.04969516441844854665 5.3784119156824878871 3.1192079164321193652 0.10063460091656324658 -1.2784643059224141126 0.065692934320053741892 2.5087701748679482883 0.06371659036201902937 -1.4585575367823806481 0.22131362914343866155 0.64608124237650799149 0.77629129656001194526 0.089839491580475286381 -2.4701505254263831368 0.42971723477502482558 -0.9201683382846498338 -5.7304184246602218877 0.0048283156645747057206 0.011216027841441156276 0.60710953910672560419 0.0070344899847949336411 0.64624253730622682745];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.1;0.1;0.1;1.98301535242027];
y1_step1.xoffset = [-10;-10;-10;-10;0.0942940629850542];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
