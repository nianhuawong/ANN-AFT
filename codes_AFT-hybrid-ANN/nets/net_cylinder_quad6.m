function [Y,Xf,Af] = net_cylinder_quad6(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 08-Jul-2020 12:51:15.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx8 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx4 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-10;-10;-10;-10;-10;-10;-10;-10];
x1_step1.gain = [0.1;0.1;0.1;0.1;0.1;0.1;0.1;0.1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.00088894248354167587113;-6.1353246159594032605;4.8310680237294310047;-4.5706464674882960608;5.5052981677845798103;-4.5793330487718479915;0.21948364163013897588;-5.4790224093597084121;-1.5139527104329468798;0.088127701936551283701;-0.074416246093736662659;2.3534530391609114197;-0.039124545965651326418;0.017053853516368507742;0.018980143746083977252;-0.0088430196400866786788;45.347122278940339868;-0.015785881497824949538;-0.032522391406671659342;0.0024957877485974962369;0.0041307965800872741696;-0.068687010443141835458;-0.018432347726237457292;-0.016652196051629555851;0.081004518613321807585;0.072936990583519448195;4.9287094867656495722;1.9651293232906905661;-4.35391659292132438;6.1696001268828455366;-1.5570367184808378003;5.213451845284554409;3.844734347995899526;-6.7751052384312782095;5.6483700340663185457;-3.6714037900278140292;5.3194286803530230756;-8.6951412080824912465;-51.559752391796685345;1.9443095550000482064];
IW1_1 = [-0.0016476667315544837617 -0.044918023807086052135 -0.14290749823139592412 -0.0075548569844322019731 -0.0066445817581628156129 -0.11468966130236953049 -0.01808980505718580864 0.00036860494746884797657;0.2054126104968270472 -2.8264359678431878464 -4.6489790946885660716 0.14778087427379596464 0.55595445954196476279 4.6024534243459855887 -4.8203383001102571015 -0.45794127386077809749;-0.24484389447159529696 -1.4235694556900690966 1.643139771402138738 0.30652289182048547689 -0.36247072917636707912 -2.6750553597222936908 -1.9248976524109018271 -0.09745615502773147254;0.12409453642927967265 3.0145813840989457155 -3.2404270724015900029 -0.10621505442780856954 -0.017814174374174148591 -2.033763330661802371 -2.6143563767453703583 -0.089958091700329936846;-0.21801304258936518576 -4.4498126372467554646 4.60120612134595941 0.15351408964948537461 0.30405338394125325241 5.4213309544093259973 0.48840352206549397795 -0.14432938528073899209;0.12182054267554662252 2.956337631895789464 -3.1975607330127524541 -0.10533910254422795827 -0.032054382656665610096 -2.1847095557811555544 -2.4417490641714039157 -0.074675155117416458506;0.33269999069523176205 2.8440774162533837277 -4.1283104909899224211 -0.39467814302703435603 0.16610428187104203657 2.6926780103500984609 -3.5057410447784547181 -0.22245849343575779811;0.12274703243811008191 4.1602837771713474524 -4.2594157981220917009 -0.12894662591316874423 0.5332164087466686464 2.3577985658220659282 -8.2456963183107685467 -0.53107914695354019319;-0.34582369167804744015 -4.5950090242706904675 9.3004901394595389519 0.96463408378626014361 0.46744222204594476633 4.1459767509891038983 -2.7602738275757658926 -0.07340180000296235574;0.71889422917049328188 3.4364432397074442527 -10.027162478247294786 -0.88901405713414483056 0.029890580176106597982 -1.1553568175958561781 1.736278093164009384 0.53283718252692557904;-0.52161461820392795996 -1.7389858432342142347 7.12617319711358288 0.67945244011591976463 -0.059260221102758935119 0.53359686161638797408 -1.1243867993009848405 -0.32670201802179199557;-0.077053242524353401932 -2.8166432090944355515 2.3801232038720594453 0.08441831878879584028 -0.013435988558821160624 1.1902799120991991444 2.3089137700576789491 0.15812036401843773681;4.6160396590256631555 56.10502048796814023 -50.043081340862542561 -2.9600652766641468716 -2.1972484673158598767 -25.900928953757009765 10.728667174817379859 2.3881561720243715818;-1.1018836643393830066 -24.192134891262302432 23.452861821463535819 1.6712087182522419315 1.6466847416365137935 25.005597285755108317 -25.905873224612921746 -1.0941540892052983303;1.4565736697309668024 19.085685415787086328 -22.463499873795569783 -1.7879569553272423033 0.090540927321105094117 7.591531599991381718 -11.015071757068872316 -0.91390801223240536455;0.3178877283543324328 6.7453074427552150993 -5.9970395085399967883 -0.61577611607162652252 2.0881149222954129563 22.093070637535603851 -32.367349491504903369 -2.444614045587341522;1.9117388575932243722 42.807804124518504807 -42.950617622705244969 -2.1161762289398198256 -1.8814982157108994798 -21.828171268215214695 -22.538456150573313863 -1.9780886239541854987;0.0088886155712154645697 0.1752715772156356322 -0.28946820832636660503 -0.016346664134140376223 -0.017491633888787123247 -0.40406549645879452637 -0.33438296198239009227 -0.01732298018937808784;-0.08086852471833047562 -1.7260498220565649863 1.7128166283318466689 0.083962119187228068107 -0.066260080633596812882 0.81411045293571393522 2.0694572695256705508 0.18540271491218757172;-3.6349186244233000487 -54.928260309257723293 39.458315836586038472 2.9659452033465742993 -2.0649432698440937095 -13.940974744496365645 17.726915276458669268 0.35824144309043770562;-0.0049436773822839705922 -0.094175807667763358766 -0.021461465477922492262 0.00051793724984310085015 0.0062178112193179623998 0.1073751449902193289 0.13896457512480964169 0.0081591090593690976385;-0.4600893340274754828 -1.2855555770122921722 6.2611451384518606034 0.60883636010379782455 -0.062820650563297719682 0.37128282140977125758 -0.96005565455673280706 -0.26819038793455790559;-0.68070165130978199652 -15.141695811566405538 5.7822030904792782735 0.76887361761112482661 -3.674496032572400761 -35.848622560591728359 30.473345781367534357 1.9881123199851318262;1.9727301300041251153 27.16612541293647709 -28.101013388084680855 -1.2883623852473482518 1.2460304780798916457 30.421039727869317204 -29.845945627836574232 -1.6389791566816773738;0.65300844211030650843 7.1094303995557490694 -8.8170636334638707865 -0.71154698326127896468 0.22931092152685975116 4.1755015937835020523 -5.6361744767917327792 -0.38190166943191267146;0.69438548102041020016 7.7145312986130409882 -9.4807929015130181227 -0.75606428232827072033 0.2255804441272795946 4.2622185045454763497 -5.8035308906932687734 -0.40191397987250709889;1.5005029544356336402 7.2092466894272311251 -12.696145244576827693 -1.3241534216787607114 0.11098784939608510869 -4.2052906914972618679 4.5751329525945809706 0.080370116430768800964;0.46520719033572960344 3.7321500470154074236 -5.2791100852818759748 -0.40959243399453504342 1.3325342692578159287 16.802347111951711156 -17.7402942139525166 -1.2875012479431342527;-0.55970386567404406541 -6.1644283806558801686 6.8038152770947428749 0.51267878087346618887 0.27083706842093890899 3.3342906637709623929 0.96955362220532692596 0.08343815531475677616;-0.19296233591568837107 2.8987154905972656316 4.6410404821918733731 -0.1538869111512564114 -0.51103234689191778806 -4.2000551408614805737 4.4028256202499109762 0.42628002970072098599;-0.37607664843808802368 -4.8996872758312743912 9.7166382904765935535 1.0119583357352011088 0.47094048700437829424 4.1302564782568653712 -2.7056571272017997387 -0.07174382070907411868;-0.16538745941698829167 -0.64626147075138373754 0.97131150040802205492 0.24952158412632025053 -0.40884718238021650061 -2.8852790602727416136 -2.0604400023073043968 -0.12661206081364662079;0.10228249620791610153 1.5664981727162123892 1.6672062004263967783 0.092775270824321978691 0.64169352383905486903 5.9202780608576146548 -6.3031438921236171424 -0.38727712300662398004;2.0096013468852835793 29.321297892603496393 -20.966177434906214216 -3.7672833551347233438 0.4209092809221855469 2.917221213862617013 -4.1956698554485534203 0.37133184505401789499;-0.11021323424597802287 -0.18772146824766305917 0.59718859196507612097 0.22256806538756623848 -0.46606094910859585667 -3.0683745086182097062 -2.2601152207530539329 -0.16045991918196841897;-0.15023698803023291526 -4.5425067223403647887 3.522712541407834852 0.031075582854495024249 0.2047428247468218443 3.7334224920454479602 2.5581128874756595692 0.026102510486915041915;0.35682846046556609965 -2.0304976450238321206 -4.8076521072746771779 -0.15118881355413343881 -0.28351646970223076671 -4.5790827596621292983 5.3628922017605846762 0.054845232693649048628;0.61780673956281473291 -10.493648255138930736 -4.8330017401856109061 -1.2869077352840037065 0.39871276830488400211 -10.063549559070194661 5.4362215855490854111 1.0316074422213308281;3.5640514793233628588 24.165707699781158624 25.196456400791973351 1.8325420466068513825 2.807940517506053002 44.87033276876010035 -45.950916364891014609 -2.2670423591218846759;0.29213036527335839443 6.6969024126248841711 -0.1484995317453110808 -0.13652259153537540937 1.5524761489188869668 14.413002040553598349 -13.370252053920223645 -0.33955614750045626238];

% Layer 2
b2 = [-0.22603484148554922606;0.20424375489162202579;-0.25876611576732783115;0.24572483106713718937];
LW2_1 = [-3.7309644996191173583 -1.5693938454260334403 0.40819305874303268844 3.6374833337936309796 0.058017932844278821691 -3.4486187376449461972 0.34032125972096755051 -0.14972877116176633305 0.63809249363692199797 -0.70436330322695872574 -3.3757058661396737165 0.00096082989589394113099 0.0077214469875431226628 0.021603476237650548475 -0.066608832196357464772 -0.015017256809656575819 -0.0072174609064294681371 0.11250624443058696023 -0.040991316349640802286 0.0039283716024991850377 -1.2553879275976937979 2.7527843514178309547 0.0073611115239771516411 0.027715148576189348184 -2.5782740679613715962 2.3924669050486215838 0.027950810112352533071 -0.019277055041357828158 -0.010558767494942770948 -1.5573025013138253048 -0.60403504428392873482 -1.3689453844813350702 0.22370929129787342493 -0.024580507303664546337 0.95691695985512559286 -0.017386413241046179412 -0.050606876171708267687 0.012947316429749779546 0.041211622116542313832 0.015666283111195753591;-5.2318987372767926658 1.793554895246460168 -1.0689408585335771207 -2.493011613955678385 -0.12685972193199068769 2.2536423382360699641 -0.22599218238684243287 0.13301267180716083716 -0.65771981646824484447 0.43127150066546160456 1.913743207590141715 -0.03608547973678701698 0.011810583628024493019 0.035493854953934381169 -0.0083385085808596916268 -0.022670880042164155005 0.0017738866554683080119 0.52194990829639076324 -0.039282994938955907716 -0.0022371509725381843493 -1.0713361534483698545 -1.5187311849637843419 0.0020336086505106432988 0.026207038039954895503 1.1089519751601961683 -0.93489969413411733168 -0.030172778288076951975 0.014900948226663848079 -0.0040915033342930392374 1.7934296420165760644 0.62816290990501610914 2.6398188480365378794 -0.21335365874516143414 0.024406653793245469686 -1.5100250512839012984 -0.0072873522795211722464 0.03538827664284577984 -0.0095291079898328322206 -0.035736712204351650524 -0.010052862727601403689;3.5530425398551748195 -0.4192932819953928969 -2.7922832579189855728 -3.1747391472805870372 -0.50535899944423456898 1.8745472283383166623 -0.23466353363299599644 0.37832496124326592257 -0.99158112300833944897 0.57392991292879269594 2.3732468685189269664 -0.16388187751620036936 0.0064127299820966763774 0.028435798161338721873 0.030550258073243529572 -0.010634268667793288221 -0.036508919065965553252 -3.6683899175561900385 -0.25038533211054186944 -0.010378453084833514503 -2.5939820142323855023 -1.8494929342628958491 -0.0077536829703960218063 -0.023095435946617060008 1.655337595898768166 -1.5177238120026363966 0.024015219047068728231 0.016926664077435642219 0.13802408340965302558 -0.44110232613037358984 0.96217669643518621836 5.2710120054567308756 0.015248639613282564953 -0.014558785368572756819 -2.451386992435508283 -0.065957357258443649606 -0.0043825004542016260736 -0.0016923933253292962071 -0.0058736534498869839502 -0.012071827605871823449;-5.9567688933008193786 0.28062664770412865112 2.3662817821074546565 2.8261666561331804104 0.44653422576168827485 -1.7095496265899134958 0.24745301420735490994 -0.34305337596222268415 -1.1733554368980299021 0.2390827787553145567 0.635671159348018322 0.12582562099590233196 -0.0031624327486662888627 0.028180631626294500025 0.008498753614368317888 0.01012503464401054952 0.034362199542111553086 2.5398307624843781127 0.18222674225991228325 -0.0092435075243855070043 6.5364883550530112899 -0.3886422156034526898 -0.014264935250633520303 -0.030989885577725275606 -1.2248170259795889692 1.045172382720094939 -0.029412298086182203649 -0.02197063349660171791 -0.090617573820307939503 0.28997280087462679043 1.1491847159885610896 -4.5055316014972044414 -0.06406460160491897482 0.01793438205425796142 2.1056724301145659517 0.046338250881447107243 0.026822212509596415203 0.0039103270025551226802 0.0014242421187495701157 -0.0168421968637299177];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.1;0.102656505659167;0.1;0.1];
y1_step1.xoffset = [-10;-10;-10;-10];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
